(function(_0x578559,_0x2597b3){const _0x5b25c3=_0x4c28,_0x8647c=_0x578559();while(!![]){try{const _0x881e1c=-parseInt(_0x5b25c3(0x18b))/0x1*(parseInt(_0x5b25c3(0x18c))/0x2)+parseInt(_0x5b25c3(0x186))/0x3*(parseInt(_0x5b25c3(0x15e))/0x4)+parseInt(_0x5b25c3(0x16a))/0x5+-parseInt(_0x5b25c3(0x194))/0x6+parseInt(_0x5b25c3(0x160))/0x7*(parseInt(_0x5b25c3(0x153))/0x8)+-parseInt(_0x5b25c3(0x15c))/0x9+parseInt(_0x5b25c3(0x159))/0xa;if(_0x881e1c===_0x2597b3)break;else _0x8647c['push'](_0x8647c['shift']());}catch(_0x410280){_0x8647c['push'](_0x8647c['shift']());}}}(_0x3163,0xd4a10));const TARGET_LAT=19.155,TARGET_LNG=73.0368,ALLOWED_RADIUS_METERS=0x32;function toRad(_0x23fc98){return _0x23fc98*Math['PI']/0xb4;}function _0x3163(){const _0x1f8550=['.\x0aDistance:\x20','fromDate','Failed\x20to\x20save\x20faculty\x20attendance.','20533770lAxAHz','getCurrentPosition','Faculty\x20name\x20required.','14609997jPPltd','coords','3015076tcDigP','round','153027QEgYnD','payload','login','Faculty\x20name\x20is\x20required.','\x20m\x20(accuracy:\x20','sqrt','addDoc','Invalid\x20action.\x20Use\x20login\x20or\x20logout.','string','loggedInTeacher','6456305UmoLNq','cos','where','collection','timestamp','You\x20have\x20already\x20checked\x20out\x20today','code','forEach','en-CA','faculty','function','error','No\x20check-in\x20found\x20for\x20today.\x20Cannot\x20check\x20out\x20before\x20checking\x20in.','getDocs','find','\x20at\x20','\x20m).\x20Check\x20location\x20accuracy/permissions.','Geolocation\x20not\x20supported','Firebase\x20not\x20initialized.','toFixed','Firebase\x20is\x20not\x20initialized.\x20Check\x20firebase.js\x20and\x20that\x20window.db\x20exists.','You\x20have\x20already\x20checked\x20in\x20today','some','trim','push','check\x20out','Too\x20far\x20to\x20','Timestamp','3xXHdZV','latitude','.Reach\x20Classes\x20and\x20do\x20Log\x20in/out','accuracy','checkout','560317dRQyRn','4DGhsTu','Check\x20In','\x20for\x20','logout','facAtt','Checked\x20in','data','Error\x20getting\x20location:\x20','9197040bQyxkP','message','query','action','Faculty\x20attendance\x20error:','Location\x20request\x20timed\x20out.\x20Try\x20again.','atan2','checkin','date','Checked\x20out','toDate','sin','Faculty\x20name\x20is\x20required.\x20Aborting.','toLocaleTimeString','384ZLiqKq','\x20â€”\x20Enter\x20faculty\x20name:','Invalid\x20actionArg.\x20Use\x20\x22checkin\x22\x20or\x20\x22checkout\x22.'];_0x3163=function(){return _0x1f8550;};return _0x3163();}function haversine(_0x376023,_0x436b6a,_0x2a6e58,_0x267153){const _0x16eb7b=_0x4c28,_0xec896d=toRad(_0x2a6e58-_0x376023),_0x509c23=toRad(_0x267153-_0x436b6a),_0x460940=Math['sin'](_0xec896d/0x2)*Math[_0x16eb7b(0x150)](_0xec896d/0x2)+Math[_0x16eb7b(0x16b)](toRad(_0x376023))*Math[_0x16eb7b(0x16b)](toRad(_0x267153))*Math[_0x16eb7b(0x150)](_0x509c23/0x2)*Math['sin'](_0x509c23/0x2);return 0x6136b8*(0x2*Math[_0x16eb7b(0x19a)](Math[_0x16eb7b(0x165)](_0x460940),Math[_0x16eb7b(0x165)](0x1-_0x460940)));}function getCurrentPositionPromise(_0x2c1030){return new Promise((_0x1c567f,_0x527e94)=>{const _0x28b909=_0x4c28;if(!navigator['geolocation'])return _0x527e94(new Error(_0x28b909(0x17b)));navigator['geolocation'][_0x28b909(0x15a)](_0x1c567f,_0xed8101=>_0x527e94(_0xed8101),_0x2c1030||{'enableHighAccuracy':!0x0,'timeout':0x3a98,'maximumAge':0x0});});}function getLocalISODate(){const _0x2a66fb=_0x4c28;return new Date()['toLocaleDateString'](_0x2a66fb(0x172));}async function submitFacultyAction(_0x51dd9e,_0x586153){const _0x3ebfa1=_0x4c28;if(!window['db'])throw new Error(_0x3ebfa1(0x17e));if(!_0x51dd9e||!_0x51dd9e[_0x3ebfa1(0x181)]())throw new Error(_0x3ebfa1(0x163));_0x51dd9e=_0x51dd9e[_0x3ebfa1(0x181)]();const _0x2b6eef=getLocalISODate(),_0x309c13=window[_0x3ebfa1(0x16d)](window['db'],_0x3ebfa1(0x190)),_0x8173e9=window[_0x3ebfa1(0x196)](_0x309c13,window[_0x3ebfa1(0x16c)](_0x3ebfa1(0x173),'==',_0x51dd9e),window[_0x3ebfa1(0x16c)](_0x3ebfa1(0x19c),'==',_0x2b6eef)),_0x177102=await window[_0x3ebfa1(0x177)](_0x8173e9),_0x3f97f1=[];_0x177102[_0x3ebfa1(0x171)](_0x1ceb81=>_0x3f97f1['push']({'id':_0x1ceb81['id'],'data':_0x3ebfa1(0x174)==typeof _0x1ceb81[_0x3ebfa1(0x192)]?_0x1ceb81[_0x3ebfa1(0x192)]():_0x1ceb81['data']}));const _0x347229=_0x3f97f1[_0x3ebfa1(0x180)](_0x5f1582=>_0x5f1582[_0x3ebfa1(0x192)]&&'checkin'===_0x5f1582[_0x3ebfa1(0x192)][_0x3ebfa1(0x197)]),_0x20e4be=_0x3f97f1['some'](_0x304f25=>_0x304f25['data']&&_0x3ebfa1(0x18a)===_0x304f25[_0x3ebfa1(0x192)][_0x3ebfa1(0x197)]);if(_0x3ebfa1(0x19b)===_0x586153){if(_0x347229){const _0x11248d=_0x3f97f1[_0x3ebfa1(0x178)](_0x52d24b=>_0x52d24b[_0x3ebfa1(0x192)]&&_0x3ebfa1(0x19b)===_0x52d24b[_0x3ebfa1(0x192)][_0x3ebfa1(0x197)]),_0x5ce2c8=_0x11248d&&_0x11248d[_0x3ebfa1(0x192)]&&_0x11248d[_0x3ebfa1(0x192)][_0x3ebfa1(0x16e)]&&_0x11248d[_0x3ebfa1(0x192)][_0x3ebfa1(0x16e)][_0x3ebfa1(0x14f)]?_0x11248d[_0x3ebfa1(0x192)][_0x3ebfa1(0x16e)]['toDate']()[_0x3ebfa1(0x152)]():_0x11248d&&_0x11248d['data']&&_0x11248d[_0x3ebfa1(0x192)][_0x3ebfa1(0x16e)]?String(_0x11248d['data'][_0x3ebfa1(0x16e)]):null;throw new Error(_0x3ebfa1(0x17f)+(_0x5ce2c8?_0x3ebfa1(0x179)+_0x5ce2c8:'')+'.');}const _0x49bff3={'faculty':_0x51dd9e,'action':_0x3ebfa1(0x19b),'timestamp':window['Timestamp']?window['Timestamp'][_0x3ebfa1(0x157)](new Date()):new Date(),'date':_0x2b6eef};return{'added':await window[_0x3ebfa1(0x166)](_0x309c13,_0x49bff3),'payload':_0x49bff3};}if(_0x3ebfa1(0x18a)===_0x586153){if(!_0x347229)throw new Error(_0x3ebfa1(0x176));if(_0x20e4be){const _0x20e740=_0x3f97f1[_0x3ebfa1(0x178)](_0x152833=>_0x152833[_0x3ebfa1(0x192)]&&_0x3ebfa1(0x18a)===_0x152833[_0x3ebfa1(0x192)]['action']),_0x55fae5=_0x20e740&&_0x20e740[_0x3ebfa1(0x192)]&&_0x20e740[_0x3ebfa1(0x192)][_0x3ebfa1(0x16e)]&&_0x20e740['data'][_0x3ebfa1(0x16e)]['toDate']?_0x20e740[_0x3ebfa1(0x192)]['timestamp'][_0x3ebfa1(0x14f)]()[_0x3ebfa1(0x152)]():_0x20e740&&_0x20e740[_0x3ebfa1(0x192)]&&_0x20e740['data'][_0x3ebfa1(0x16e)]?String(_0x20e740[_0x3ebfa1(0x192)]['timestamp']):null;throw new Error('You\x20have\x20already\x20checked\x20out\x20today'+(_0x55fae5?'\x20at\x20'+_0x55fae5:'')+'.');}const _0x53ede8={'faculty':_0x51dd9e,'action':_0x3ebfa1(0x18a),'timestamp':window[_0x3ebfa1(0x185)]?window[_0x3ebfa1(0x185)]['fromDate'](new Date()):new Date(),'date':_0x2b6eef};return{'added':await window[_0x3ebfa1(0x166)](_0x309c13,_0x53ede8),'payload':_0x53ede8};}throw new Error(_0x3ebfa1(0x155));}async function decideAndSubmitFacultyRecord(_0x14606b){const _0x46d4e0=_0x4c28;if(!window['db'])throw new Error(_0x46d4e0(0x17c));if(!_0x14606b||!_0x14606b['trim']())throw new Error(_0x46d4e0(0x15b));_0x14606b=_0x14606b['trim']();const _0x48a640=getLocalISODate(),_0x2a79d9=window[_0x46d4e0(0x16d)](window['db'],_0x46d4e0(0x190)),_0x5ec751=window[_0x46d4e0(0x196)](_0x2a79d9,window[_0x46d4e0(0x16c)]('faculty','==',_0x14606b),window[_0x46d4e0(0x16c)]('date','==',_0x48a640)),_0x2dd0bc=await window[_0x46d4e0(0x177)](_0x5ec751),_0x1afa7f=[];_0x2dd0bc[_0x46d4e0(0x171)](_0x424f66=>_0x1afa7f[_0x46d4e0(0x182)]({'id':_0x424f66['id'],'data':_0x46d4e0(0x174)==typeof _0x424f66[_0x46d4e0(0x192)]?_0x424f66[_0x46d4e0(0x192)]():_0x424f66[_0x46d4e0(0x192)]}));const _0x3b1d9f=_0x1afa7f[_0x46d4e0(0x180)](_0x32886b=>_0x32886b[_0x46d4e0(0x192)]&&_0x46d4e0(0x19b)===_0x32886b[_0x46d4e0(0x192)][_0x46d4e0(0x197)]),_0x3d516c=_0x1afa7f[_0x46d4e0(0x180)](_0x1a68b7=>_0x1a68b7[_0x46d4e0(0x192)]&&_0x46d4e0(0x18a)===_0x1a68b7[_0x46d4e0(0x192)][_0x46d4e0(0x197)]);if(_0x3b1d9f){if(_0x3b1d9f&&!_0x3d516c)return await submitFacultyAction(_0x14606b,_0x46d4e0(0x18a));{const _0x150bf2=_0x1afa7f[_0x46d4e0(0x178)](_0x32d850=>_0x32d850[_0x46d4e0(0x192)]&&_0x46d4e0(0x18a)===_0x32d850[_0x46d4e0(0x192)][_0x46d4e0(0x197)]),_0x4bb23d=_0x150bf2&&_0x150bf2[_0x46d4e0(0x192)]&&_0x150bf2['data'][_0x46d4e0(0x16e)]&&_0x150bf2[_0x46d4e0(0x192)]['timestamp']['toDate']?_0x150bf2[_0x46d4e0(0x192)][_0x46d4e0(0x16e)][_0x46d4e0(0x14f)]()[_0x46d4e0(0x152)]():null;throw new Error(_0x46d4e0(0x16f)+(_0x4bb23d?'\x20at\x20'+_0x4bb23d:'')+'.');}}return await submitFacultyAction(_0x14606b,_0x46d4e0(0x19b));}function formatTimeFromTimestamp(_0x377c6e){const _0x3885e2=_0x4c28;if(!_0x377c6e)return'';if(_0x377c6e[_0x3885e2(0x14f)]&&_0x3885e2(0x174)==typeof _0x377c6e[_0x3885e2(0x14f)])try{return _0x377c6e[_0x3885e2(0x14f)]()['toLocaleTimeString']();}catch(_0x4adab9){}return _0x377c6e instanceof Date?_0x377c6e[_0x3885e2(0x152)]():String(_0x377c6e);}function _0x4c28(_0x18c29f,_0x54f2a8){_0x18c29f=_0x18c29f-0x14f;const _0x3163f3=_0x3163();let _0x4c281b=_0x3163f3[_0x18c29f];return _0x4c281b;}async function performFacultyLog(_0x1a6248){const _0x271836=_0x4c28,_0x544ca5=_0x271836(0x162)===_0x1a6248?_0x271836(0x19b):'logout'===_0x1a6248?_0x271836(0x18a):null;if(!_0x544ca5)return void alert(_0x271836(0x167));let _0x40f36c;try{_0x40f36c=await getCurrentPositionPromise();}catch(_0x230f77){return void(_0x230f77&&void 0x0!==_0x230f77[_0x271836(0x170)]?0x1===_0x230f77[_0x271836(0x170)]?alert('Location\x20permission\x20denied.\x20Please\x20allow\x20location\x20access\x20and\x20try\x20again.'):0x2===_0x230f77['code']?alert('Position\x20unavailable.\x20Try\x20again\x20or\x20move\x20to\x20a\x20location\x20with\x20better\x20signal.'):0x3===_0x230f77[_0x271836(0x170)]?alert(_0x271836(0x199)):alert(_0x271836(0x193)+(_0x230f77['message']||_0x230f77)):alert(_0x271836(0x193)+(_0x230f77&&_0x230f77[_0x271836(0x195)]?_0x230f77[_0x271836(0x195)]:_0x230f77)));}const _0x4bac9a=_0x40f36c[_0x271836(0x15d)][_0x271836(0x187)],_0x422f25=_0x40f36c['coords']['longitude'],_0x3225e3=_0x40f36c[_0x271836(0x15d)][_0x271836(0x189)],_0x48e026=haversine(_0x4bac9a,_0x422f25,19.155,73.0368);if(!isFinite(_0x48e026)||_0x48e026>0x1312d00)return void alert('Computed\x20distance\x20looks\x20unrealistic\x20('+Math[_0x271836(0x15f)](_0x48e026)+_0x271836(0x17a));if(_0x48e026>0x32)return void alert(_0x271836(0x184)+(_0x271836(0x19b)===_0x544ca5?'check\x20in':_0x271836(0x183))+_0x271836(0x156)+_0x48e026[_0x271836(0x17d)](0x1)+_0x271836(0x188));let _0x112b8d=_0x271836(0x168)==typeof window[_0x271836(0x169)]&&window['loggedInTeacher']['trim']()?window[_0x271836(0x169)][_0x271836(0x181)]():null;if(!_0x112b8d){const _0x7c9656=prompt((_0x271836(0x19b)===_0x544ca5?_0x271836(0x18d):'Check\x20Out')+_0x271836(0x154));if(!_0x7c9656||!_0x7c9656['trim']())return void alert(_0x271836(0x151));_0x112b8d=_0x7c9656['trim']();}try{const _0x1924e5=await submitFacultyAction(_0x112b8d,_0x544ca5),_0x58f03a=_0x1924e5&&_0x1924e5[_0x271836(0x161)]&&_0x1924e5[_0x271836(0x161)][_0x271836(0x16e)]?formatTimeFromTimestamp(_0x1924e5[_0x271836(0x161)][_0x271836(0x16e)]):new Date()['toLocaleTimeString']();alert((_0x271836(0x19b)===_0x544ca5?_0x271836(0x191):_0x271836(0x19d))+_0x271836(0x18e)+_0x112b8d+'\x20at\x20'+_0x58f03a+_0x271836(0x156)+_0x48e026[_0x271836(0x17d)](0x1)+_0x271836(0x164)+(null!=_0x3225e3?_0x3225e3+'\x20m':'n/a')+').');}catch(_0x4d9059){alert(_0x4d9059&&_0x4d9059[_0x271836(0x195)]?_0x4d9059[_0x271836(0x195)]:_0x271836(0x158)),console[_0x271836(0x175)](_0x271836(0x198),_0x4d9059);}}function logIn(){const _0x29c091=_0x4c28;performFacultyLog(_0x29c091(0x162));}function logOut(){const _0x4e0da9=_0x4c28;performFacultyLog(_0x4e0da9(0x18f));}
