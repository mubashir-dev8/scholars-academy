(function(_0x188bd5,_0x4c71d3){const _0x23f32a=_0x1e98,_0x58bb8b=_0x188bd5();while(!![]){try{const _0x25a634=-parseInt(_0x23f32a(0xb5))/0x1*(parseInt(_0x23f32a(0xbe))/0x2)+-parseInt(_0x23f32a(0xc0))/0x3*(parseInt(_0x23f32a(0xc9))/0x4)+parseInt(_0x23f32a(0xa9))/0x5+-parseInt(_0x23f32a(0xd5))/0x6*(parseInt(_0x23f32a(0xde))/0x7)+-parseInt(_0x23f32a(0xd9))/0x8+-parseInt(_0x23f32a(0xe2))/0x9*(-parseInt(_0x23f32a(0xd2))/0xa)+parseInt(_0x23f32a(0xdb))/0xb;if(_0x25a634===_0x4c71d3)break;else _0x58bb8b['push'](_0x58bb8b['shift']());}catch(_0x53145e){_0x58bb8b['push'](_0x58bb8b['shift']());}}}(_0xf0fe,0x813ba));const TARGET_LAT=19.155,TARGET_LNG=73.0368,ALLOWED_RADIUS_METERS=0x32;function _0xf0fe(){const _0x14beda=['4225704qMfRkP','toLocaleTimeString','13786520FgIpUj','\x20â€”\x20Enter\x20faculty\x20name:','data','1878982wBSLkn','check\x20in','collection','sqrt','3274839wzsxyo','fromDate','accuracy','toDate','Firebase\x20is\x20not\x20initialized.\x20Check\x20firebase.js\x20and\x20that\x20window.db\x20exists.','Computed\x20distance\x20looks\x20unrealistic\x20(','where','Firebase\x20not\x20initialized.','toFixed','You\x20have\x20already\x20checked\x20in\x20today','\x20for\x20','cos','\x20m\x20(accuracy:\x20','facAtt','function','Failed\x20to\x20save\x20faculty\x20attendance.','code','Location\x20request\x20timed\x20out.\x20Try\x20again.','3030925HJKRLJ','Faculty\x20name\x20is\x20required.\x20Aborting.','n/a','query','forEach','some','Timestamp','timestamp','Location\x20permission\x20denied.\x20Please\x20allow\x20location\x20access\x20and\x20try\x20again.','string','\x20m).\x20Check\x20location\x20accuracy/permissions.','\x20at\x20','1bYCaai','Invalid\x20actionArg.\x20Use\x20\x22checkin\x22\x20or\x20\x22checkout\x22.','checkin','faculty','checkout','Check\x20Out','payload','geolocation','loggedInTeacher','658012WPyxIc','Too\x20far\x20to\x20','94623crGqkO','atan2','You\x20have\x20already\x20checked\x20out\x20today','sin','Position\x20unavailable.\x20Try\x20again\x20or\x20move\x20to\x20a\x20location\x20with\x20better\x20signal.','find','.\x0aDistance:\x20','logout','login','4rnidJF','getCurrentPosition','message','coords','en-CA','check\x20out','push','date','getDocs','10EVUFRx','Checked\x20out','action','18guNKaD','addDoc','.Reach\x20Classes\x20and\x20do\x20Log\x20in/out','trim'];_0xf0fe=function(){return _0x14beda;};return _0xf0fe();}function toRad(_0x4a8238){return _0x4a8238*Math['PI']/0xb4;}function haversine(_0x105738,_0xee6478,_0x1b27e8,_0x27f86a){const _0x58afa7=_0x1e98,_0x2ac758=toRad(_0x1b27e8-_0x105738),_0x5d4b22=toRad(_0x27f86a-_0xee6478),_0x305749=Math['sin'](_0x2ac758/0x2)*Math['sin'](_0x2ac758/0x2)+Math[_0x58afa7(0xed)](toRad(_0x105738))*Math[_0x58afa7(0xed)](toRad(_0x27f86a))*Math[_0x58afa7(0xc3)](_0x5d4b22/0x2)*Math['sin'](_0x5d4b22/0x2);return 0x6136b8*(0x2*Math[_0x58afa7(0xc1)](Math[_0x58afa7(0xe1)](_0x305749),Math[_0x58afa7(0xe1)](0x1-_0x305749)));}function getCurrentPositionPromise(_0x8dfc18){return new Promise((_0xb15e0e,_0x45e4d9)=>{const _0x3946b8=_0x1e98;if(!navigator[_0x3946b8(0xbc)])return _0x45e4d9(new Error('Geolocation\x20not\x20supported'));navigator[_0x3946b8(0xbc)][_0x3946b8(0xca)](_0xb15e0e,_0x356e3a=>_0x45e4d9(_0x356e3a),_0x8dfc18||{'enableHighAccuracy':!0x0,'timeout':0x3a98,'maximumAge':0x0});});}function getLocalISODate(){const _0x3beb30=_0x1e98;return new Date()['toLocaleDateString'](_0x3beb30(0xcd));}async function submitFacultyAction(_0x52ff8d,_0xd3adaf){const _0x418374=_0x1e98;if(!window['db'])throw new Error(_0x418374(0xe6));if(!_0x52ff8d||!_0x52ff8d[_0x418374(0xd8)]())throw new Error('Faculty\x20name\x20is\x20required.');_0x52ff8d=_0x52ff8d['trim']();const _0x458ee8=getLocalISODate(),_0x5836a3=window[_0x418374(0xe0)](window['db'],'facAtt'),_0xf9b0e2=window[_0x418374(0xac)](_0x5836a3,window[_0x418374(0xe8)](_0x418374(0xb8),'==',_0x52ff8d),window[_0x418374(0xe8)](_0x418374(0xd0),'==',_0x458ee8)),_0x3ae6a0=await window[_0x418374(0xd1)](_0xf9b0e2),_0x37fcd7=[];_0x3ae6a0['forEach'](_0x530158=>_0x37fcd7[_0x418374(0xcf)]({'id':_0x530158['id'],'data':'function'==typeof _0x530158['data']?_0x530158[_0x418374(0xdd)]():_0x530158['data']}));const _0x42da7b=_0x37fcd7['some'](_0x268e34=>_0x268e34[_0x418374(0xdd)]&&_0x418374(0xb7)===_0x268e34[_0x418374(0xdd)][_0x418374(0xd4)]),_0x5c1162=_0x37fcd7[_0x418374(0xae)](_0x6e5f28=>_0x6e5f28[_0x418374(0xdd)]&&_0x418374(0xb9)===_0x6e5f28[_0x418374(0xdd)][_0x418374(0xd4)]);if(_0x418374(0xb7)===_0xd3adaf){if(_0x42da7b){const _0x3baedf=_0x37fcd7[_0x418374(0xc5)](_0x31658=>_0x31658[_0x418374(0xdd)]&&_0x418374(0xb7)===_0x31658[_0x418374(0xdd)][_0x418374(0xd4)]),_0x1254a5=_0x3baedf&&_0x3baedf[_0x418374(0xdd)]&&_0x3baedf['data']['timestamp']&&_0x3baedf[_0x418374(0xdd)][_0x418374(0xb0)][_0x418374(0xe5)]?_0x3baedf[_0x418374(0xdd)]['timestamp'][_0x418374(0xe5)]()[_0x418374(0xda)]():_0x3baedf&&_0x3baedf[_0x418374(0xdd)]&&_0x3baedf[_0x418374(0xdd)][_0x418374(0xb0)]?String(_0x3baedf['data'][_0x418374(0xb0)]):null;throw new Error(_0x418374(0xeb)+(_0x1254a5?_0x418374(0xb4)+_0x1254a5:'')+'.');}const _0xd2d7a3={'faculty':_0x52ff8d,'action':'checkin','timestamp':window[_0x418374(0xaf)]?window[_0x418374(0xaf)]['fromDate'](new Date()):new Date(),'date':_0x458ee8};return{'added':await window['addDoc'](_0x5836a3,_0xd2d7a3),'payload':_0xd2d7a3};}if('checkout'===_0xd3adaf){if(!_0x42da7b)throw new Error('No\x20check-in\x20found\x20for\x20today.\x20Cannot\x20check\x20out\x20before\x20checking\x20in.');if(_0x5c1162){const _0x1c92d9=_0x37fcd7[_0x418374(0xc5)](_0x5eda21=>_0x5eda21[_0x418374(0xdd)]&&_0x418374(0xb9)===_0x5eda21[_0x418374(0xdd)][_0x418374(0xd4)]),_0x4858bd=_0x1c92d9&&_0x1c92d9[_0x418374(0xdd)]&&_0x1c92d9[_0x418374(0xdd)][_0x418374(0xb0)]&&_0x1c92d9[_0x418374(0xdd)]['timestamp']['toDate']?_0x1c92d9[_0x418374(0xdd)][_0x418374(0xb0)][_0x418374(0xe5)]()['toLocaleTimeString']():_0x1c92d9&&_0x1c92d9[_0x418374(0xdd)]&&_0x1c92d9[_0x418374(0xdd)][_0x418374(0xb0)]?String(_0x1c92d9['data'][_0x418374(0xb0)]):null;throw new Error(_0x418374(0xc2)+(_0x4858bd?'\x20at\x20'+_0x4858bd:'')+'.');}const _0x3f4095={'faculty':_0x52ff8d,'action':_0x418374(0xb9),'timestamp':window[_0x418374(0xaf)]?window['Timestamp'][_0x418374(0xe3)](new Date()):new Date(),'date':_0x458ee8};return{'added':await window[_0x418374(0xd6)](_0x5836a3,_0x3f4095),'payload':_0x3f4095};}throw new Error(_0x418374(0xb6));}async function decideAndSubmitFacultyRecord(_0x2da353){const _0x19c31f=_0x1e98;if(!window['db'])throw new Error(_0x19c31f(0xe9));if(!_0x2da353||!_0x2da353[_0x19c31f(0xd8)]())throw new Error('Faculty\x20name\x20required.');_0x2da353=_0x2da353[_0x19c31f(0xd8)]();const _0x5298d2=getLocalISODate(),_0x7094da=window[_0x19c31f(0xe0)](window['db'],_0x19c31f(0xef)),_0x134a25=window[_0x19c31f(0xac)](_0x7094da,window[_0x19c31f(0xe8)]('faculty','==',_0x2da353),window[_0x19c31f(0xe8)](_0x19c31f(0xd0),'==',_0x5298d2)),_0x254b4f=await window['getDocs'](_0x134a25),_0x1d4bd7=[];_0x254b4f[_0x19c31f(0xad)](_0x29dd6a=>_0x1d4bd7[_0x19c31f(0xcf)]({'id':_0x29dd6a['id'],'data':_0x19c31f(0xa5)==typeof _0x29dd6a[_0x19c31f(0xdd)]?_0x29dd6a[_0x19c31f(0xdd)]():_0x29dd6a[_0x19c31f(0xdd)]}));const _0x5d4a83=_0x1d4bd7[_0x19c31f(0xae)](_0x551844=>_0x551844[_0x19c31f(0xdd)]&&'checkin'===_0x551844[_0x19c31f(0xdd)][_0x19c31f(0xd4)]),_0x6885e6=_0x1d4bd7[_0x19c31f(0xae)](_0x40277a=>_0x40277a[_0x19c31f(0xdd)]&&_0x19c31f(0xb9)===_0x40277a[_0x19c31f(0xdd)][_0x19c31f(0xd4)]);if(_0x5d4a83){if(_0x5d4a83&&!_0x6885e6)return await submitFacultyAction(_0x2da353,_0x19c31f(0xb9));{const _0x185cca=_0x1d4bd7[_0x19c31f(0xc5)](_0x26e68f=>_0x26e68f['data']&&_0x19c31f(0xb9)===_0x26e68f[_0x19c31f(0xdd)][_0x19c31f(0xd4)]),_0x53eedf=_0x185cca&&_0x185cca[_0x19c31f(0xdd)]&&_0x185cca[_0x19c31f(0xdd)][_0x19c31f(0xb0)]&&_0x185cca[_0x19c31f(0xdd)][_0x19c31f(0xb0)][_0x19c31f(0xe5)]?_0x185cca[_0x19c31f(0xdd)][_0x19c31f(0xb0)][_0x19c31f(0xe5)]()['toLocaleTimeString']():null;throw new Error(_0x19c31f(0xc2)+(_0x53eedf?_0x19c31f(0xb4)+_0x53eedf:'')+'.');}}return await submitFacultyAction(_0x2da353,_0x19c31f(0xb7));}function formatTimeFromTimestamp(_0x35a856){const _0x4dde12=_0x1e98;if(!_0x35a856)return'';if(_0x35a856[_0x4dde12(0xe5)]&&_0x4dde12(0xa5)==typeof _0x35a856['toDate'])try{return _0x35a856['toDate']()[_0x4dde12(0xda)]();}catch(_0x1382b5){}return _0x35a856 instanceof Date?_0x35a856['toLocaleTimeString']():String(_0x35a856);}function _0x1e98(_0x120a69,_0x4728bd){const _0xf0fe6f=_0xf0fe();return _0x1e98=function(_0x1e984b,_0x4c69cf){_0x1e984b=_0x1e984b-0xa5;let _0x2b1b76=_0xf0fe6f[_0x1e984b];return _0x2b1b76;},_0x1e98(_0x120a69,_0x4728bd);}async function performFacultyLog(_0xf7f81e){const _0x339d82=_0x1e98,_0x23f200=_0x339d82(0xc8)===_0xf7f81e?_0x339d82(0xb7):_0x339d82(0xc7)===_0xf7f81e?'checkout':null;if(!_0x23f200)return void alert('Invalid\x20action.\x20Use\x20login\x20or\x20logout.');let _0x599562;try{_0x599562=await getCurrentPositionPromise();}catch(_0x1263bc){return void(_0x1263bc&&void 0x0!==_0x1263bc['code']?0x1===_0x1263bc[_0x339d82(0xa7)]?alert(_0x339d82(0xb1)):0x2===_0x1263bc[_0x339d82(0xa7)]?alert(_0x339d82(0xc4)):0x3===_0x1263bc[_0x339d82(0xa7)]?alert(_0x339d82(0xa8)):alert('Error\x20getting\x20location:\x20'+(_0x1263bc[_0x339d82(0xcb)]||_0x1263bc)):alert('Error\x20getting\x20location:\x20'+(_0x1263bc&&_0x1263bc[_0x339d82(0xcb)]?_0x1263bc[_0x339d82(0xcb)]:_0x1263bc)));}const _0x57846c=_0x599562['coords']['latitude'],_0x3f262b=_0x599562['coords']['longitude'],_0x399fdd=_0x599562[_0x339d82(0xcc)][_0x339d82(0xe4)],_0x5846ab=haversine(_0x57846c,_0x3f262b,19.155,73.0368);if(!isFinite(_0x5846ab)||_0x5846ab>0x1312d00)return void alert(_0x339d82(0xe7)+Math['round'](_0x5846ab)+_0x339d82(0xb3));if(_0x5846ab>0x32)return void alert(_0x339d82(0xbf)+('checkin'===_0x23f200?_0x339d82(0xdf):_0x339d82(0xce))+_0x339d82(0xc6)+_0x5846ab[_0x339d82(0xea)](0x1)+_0x339d82(0xd7));let _0x422381=_0x339d82(0xb2)==typeof window['loggedInTeacher']&&window[_0x339d82(0xbd)]['trim']()?window[_0x339d82(0xbd)][_0x339d82(0xd8)]():null;if(!_0x422381){const _0x205e12=prompt((_0x339d82(0xb7)===_0x23f200?'Check\x20In':_0x339d82(0xba))+_0x339d82(0xdc));if(!_0x205e12||!_0x205e12['trim']())return void alert(_0x339d82(0xaa));_0x422381=_0x205e12[_0x339d82(0xd8)]();}try{const _0x9af95d=await submitFacultyAction(_0x422381,_0x23f200),_0x1dad01=_0x9af95d&&_0x9af95d[_0x339d82(0xbb)]&&_0x9af95d[_0x339d82(0xbb)][_0x339d82(0xb0)]?formatTimeFromTimestamp(_0x9af95d[_0x339d82(0xbb)][_0x339d82(0xb0)]):new Date()[_0x339d82(0xda)]();alert((_0x339d82(0xb7)===_0x23f200?'Checked\x20in':_0x339d82(0xd3))+_0x339d82(0xec)+_0x422381+_0x339d82(0xb4)+_0x1dad01+'.\x0aDistance:\x20'+_0x5846ab[_0x339d82(0xea)](0x1)+_0x339d82(0xee)+(null!=_0x399fdd?_0x399fdd+'\x20m':_0x339d82(0xab))+').');}catch(_0x2d3032){alert(_0x2d3032&&_0x2d3032[_0x339d82(0xcb)]?_0x2d3032['message']:_0x339d82(0xa6)),console['error']('Faculty\x20attendance\x20error:',_0x2d3032);}}function logIn(){const _0x256636=_0x1e98;performFacultyLog(_0x256636(0xc8));}function logOut(){const _0x305032=_0x1e98;performFacultyLog(_0x305032(0xc7));}
