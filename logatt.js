function _0x3c43(){const _0x2a5077=['longitude','No\x20check-in\x20found\x20for\x20today.\x20Cannot\x20check\x20out\x20before\x20checking\x20in.','toLocaleTimeString','accuracy','Invalid\x20action.\x20Use\x20login\x20or\x20logout.','addDoc','12zWYbHt','message','Firebase\x20is\x20not\x20initialized.\x20Check\x20firebase.js\x20and\x20that\x20window.db\x20exists.','loggedInTeacher','29051YRTZUa','checkin','data','2177SAZRby','.\x0aDistance:\x20','430342jDTQzi','Invalid\x20actionArg.\x20Use\x20\x22checkin\x22\x20or\x20\x22checkout\x22.','Too\x20far\x20to\x20','Faculty\x20name\x20is\x20required.\x20Aborting.','push','atan2','toFixed','4933088ySpKDX','toDate','\x20m\x20(accuracy:\x20','code','1967256RIhANa','Checked\x20out','error','Check\x20In','query','Timestamp','12018YgvDTf','1RFYBTm','action','46870ntnRND','n/a','You\x20have\x20already\x20checked\x20out\x20today','Faculty\x20name\x20required.','Location\x20permission\x20denied.\x20Please\x20allow\x20location\x20access\x20and\x20try\x20again.','348095RAARCa','Faculty\x20name\x20is\x20required.','sin','getDocs','coords','Faculty\x20attendance\x20error:','Checked\x20in','geolocation','where','\x20for\x20','string','\x20â€”\x20Enter\x20faculty\x20name:','forEach','check\x20in','function','latitude','find','trim','\x20m\x20(allowed:\x2050\x20m).','logout','1314ObZnwl','Computed\x20distance\x20looks\x20unrealistic\x20(','some','timestamp','15444AZaSIp','collection','payload','checkout','fromDate','Position\x20unavailable.\x20Try\x20again\x20or\x20move\x20to\x20a\x20location\x20with\x20better\x20signal.','date','facAtt','\x20at\x20','Error\x20getting\x20location:\x20','Geolocation\x20not\x20supported','login','round','You\x20have\x20already\x20checked\x20in\x20today','faculty'];_0x3c43=function(){return _0x2a5077;};return _0x3c43();}(function(_0x4e07a2,_0x49d097){const _0x50a616=_0x1967,_0x3928e8=_0x4e07a2();while(!![]){try{const _0xcf0bf6=-parseInt(_0x50a616(0x191))/0x1*(parseInt(_0x50a616(0x1ce))/0x2)+-parseInt(_0x50a616(0x18a))/0x3+-parseInt(_0x50a616(0x1c5))/0x4*(parseInt(_0x50a616(0x198))/0x5)+-parseInt(_0x50a616(0x190))/0x6*(parseInt(_0x50a616(0x1cc))/0x7)+-parseInt(_0x50a616(0x1d5))/0x8+parseInt(_0x50a616(0x1ac))/0x9*(-parseInt(_0x50a616(0x193))/0xa)+parseInt(_0x50a616(0x1c9))/0xb*(parseInt(_0x50a616(0x1b0))/0xc);if(_0xcf0bf6===_0x49d097)break;else _0x3928e8['push'](_0x3928e8['shift']());}catch(_0x5aa4d2){_0x3928e8['push'](_0x3928e8['shift']());}}}(_0x3c43,0x60834));function _0x1967(_0x3308b6,_0x5c669){const _0x3c43cd=_0x3c43();return _0x1967=function(_0x196747,_0x1a10ad){_0x196747=_0x196747-0x188;let _0x24e856=_0x3c43cd[_0x196747];return _0x24e856;},_0x1967(_0x3308b6,_0x5c669);}const TARGET_LAT=19.155,TARGET_LNG=73.0368,ALLOWED_RADIUS_METERS=0x32;function toRad(_0x32e9a6){return _0x32e9a6*Math['PI']/0xb4;}function haversine(_0xbbc984,_0x2c9a38,_0x438237,_0x4714f7){const _0x207433=_0x1967,_0x14c0ff=toRad(_0x438237-_0xbbc984),_0x25ddda=toRad(_0x4714f7-_0x2c9a38),_0x5121ea=Math[_0x207433(0x19a)](_0x14c0ff/0x2)*Math[_0x207433(0x19a)](_0x14c0ff/0x2)+Math['cos'](toRad(_0xbbc984))*Math['cos'](toRad(_0x4714f7))*Math[_0x207433(0x19a)](_0x25ddda/0x2)*Math[_0x207433(0x19a)](_0x25ddda/0x2);return 0x6136b8*(0x2*Math[_0x207433(0x1d3)](Math['sqrt'](_0x5121ea),Math['sqrt'](0x1-_0x5121ea)));}function getCurrentPositionPromise(_0x257cac){return new Promise((_0x2fca51,_0x9b113b)=>{const _0x2476cd=_0x1967;if(!navigator['geolocation'])return _0x9b113b(new Error(_0x2476cd(0x1ba)));navigator[_0x2476cd(0x19f)]['getCurrentPosition'](_0x2fca51,_0x17188e=>_0x9b113b(_0x17188e),_0x257cac||{'enableHighAccuracy':!0x0,'timeout':0x3a98,'maximumAge':0x0});});}function getLocalISODate(){return new Date()['toLocaleDateString']('en-CA');}async function submitFacultyAction(_0x546c5b,_0x5ac025){const _0x3aadbc=_0x1967;if(!window['db'])throw new Error(_0x3aadbc(0x1c7));if(!_0x546c5b||!_0x546c5b[_0x3aadbc(0x1a9)]())throw new Error(_0x3aadbc(0x199));_0x546c5b=_0x546c5b['trim']();const _0x31209e=getLocalISODate(),_0x64ca16=window['collection'](window['db'],_0x3aadbc(0x1b7)),_0x392450=window[_0x3aadbc(0x18e)](_0x64ca16,window[_0x3aadbc(0x1a0)](_0x3aadbc(0x1be),'==',_0x546c5b),window[_0x3aadbc(0x1a0)]('date','==',_0x31209e)),_0x50b1d9=await window[_0x3aadbc(0x19b)](_0x392450),_0x26aedd=[];_0x50b1d9[_0x3aadbc(0x1a4)](_0x348f8f=>_0x26aedd[_0x3aadbc(0x1d2)]({'id':_0x348f8f['id'],'data':'function'==typeof _0x348f8f['data']?_0x348f8f[_0x3aadbc(0x1cb)]():_0x348f8f[_0x3aadbc(0x1cb)]}));const _0x7909cd=_0x26aedd[_0x3aadbc(0x1ae)](_0x4613e6=>_0x4613e6[_0x3aadbc(0x1cb)]&&_0x3aadbc(0x1ca)===_0x4613e6[_0x3aadbc(0x1cb)][_0x3aadbc(0x192)]),_0x23ba35=_0x26aedd[_0x3aadbc(0x1ae)](_0x211ced=>_0x211ced[_0x3aadbc(0x1cb)]&&_0x3aadbc(0x1b3)===_0x211ced[_0x3aadbc(0x1cb)][_0x3aadbc(0x192)]);if(_0x3aadbc(0x1ca)===_0x5ac025){if(_0x7909cd){const _0x38c0b5=_0x26aedd[_0x3aadbc(0x1a8)](_0xbc29f0=>_0xbc29f0[_0x3aadbc(0x1cb)]&&_0x3aadbc(0x1ca)===_0xbc29f0[_0x3aadbc(0x1cb)]['action']),_0x3500e3=_0x38c0b5&&_0x38c0b5[_0x3aadbc(0x1cb)]&&_0x38c0b5['data'][_0x3aadbc(0x1af)]&&_0x38c0b5[_0x3aadbc(0x1cb)][_0x3aadbc(0x1af)][_0x3aadbc(0x1d6)]?_0x38c0b5[_0x3aadbc(0x1cb)][_0x3aadbc(0x1af)][_0x3aadbc(0x1d6)]()[_0x3aadbc(0x1c1)]():_0x38c0b5&&_0x38c0b5['data']&&_0x38c0b5[_0x3aadbc(0x1cb)][_0x3aadbc(0x1af)]?String(_0x38c0b5[_0x3aadbc(0x1cb)]['timestamp']):null;throw new Error(_0x3aadbc(0x1bd)+(_0x3500e3?'\x20at\x20'+_0x3500e3:'')+'.');}const _0x4ef284={'faculty':_0x546c5b,'action':_0x3aadbc(0x1ca),'timestamp':window[_0x3aadbc(0x18f)]?window[_0x3aadbc(0x18f)][_0x3aadbc(0x1b4)](new Date()):new Date(),'date':_0x31209e};return{'added':await window[_0x3aadbc(0x1c4)](_0x64ca16,_0x4ef284),'payload':_0x4ef284};}if('checkout'===_0x5ac025){if(!_0x7909cd)throw new Error(_0x3aadbc(0x1c0));if(_0x23ba35){const _0x4f2c6a=_0x26aedd[_0x3aadbc(0x1a8)](_0x55e7fb=>_0x55e7fb[_0x3aadbc(0x1cb)]&&_0x3aadbc(0x1b3)===_0x55e7fb[_0x3aadbc(0x1cb)]['action']),_0x3b1ca2=_0x4f2c6a&&_0x4f2c6a[_0x3aadbc(0x1cb)]&&_0x4f2c6a[_0x3aadbc(0x1cb)]['timestamp']&&_0x4f2c6a['data'][_0x3aadbc(0x1af)][_0x3aadbc(0x1d6)]?_0x4f2c6a[_0x3aadbc(0x1cb)][_0x3aadbc(0x1af)][_0x3aadbc(0x1d6)]()['toLocaleTimeString']():_0x4f2c6a&&_0x4f2c6a[_0x3aadbc(0x1cb)]&&_0x4f2c6a[_0x3aadbc(0x1cb)][_0x3aadbc(0x1af)]?String(_0x4f2c6a[_0x3aadbc(0x1cb)][_0x3aadbc(0x1af)]):null;throw new Error(_0x3aadbc(0x195)+(_0x3b1ca2?_0x3aadbc(0x1b8)+_0x3b1ca2:'')+'.');}const _0x59ed07={'faculty':_0x546c5b,'action':_0x3aadbc(0x1b3),'timestamp':window[_0x3aadbc(0x18f)]?window[_0x3aadbc(0x18f)][_0x3aadbc(0x1b4)](new Date()):new Date(),'date':_0x31209e};return{'added':await window[_0x3aadbc(0x1c4)](_0x64ca16,_0x59ed07),'payload':_0x59ed07};}throw new Error(_0x3aadbc(0x1cf));}async function decideAndSubmitFacultyRecord(_0x1df192){const _0x3eb48c=_0x1967;if(!window['db'])throw new Error('Firebase\x20not\x20initialized.');if(!_0x1df192||!_0x1df192['trim']())throw new Error(_0x3eb48c(0x196));_0x1df192=_0x1df192[_0x3eb48c(0x1a9)]();const _0x6ea74b=getLocalISODate(),_0x2186e9=window[_0x3eb48c(0x1b1)](window['db'],_0x3eb48c(0x1b7)),_0x554696=window['query'](_0x2186e9,window[_0x3eb48c(0x1a0)](_0x3eb48c(0x1be),'==',_0x1df192),window[_0x3eb48c(0x1a0)](_0x3eb48c(0x1b6),'==',_0x6ea74b)),_0x3cdd1e=await window[_0x3eb48c(0x19b)](_0x554696),_0x1517b4=[];_0x3cdd1e[_0x3eb48c(0x1a4)](_0x3fbb93=>_0x1517b4[_0x3eb48c(0x1d2)]({'id':_0x3fbb93['id'],'data':_0x3eb48c(0x1a6)==typeof _0x3fbb93[_0x3eb48c(0x1cb)]?_0x3fbb93[_0x3eb48c(0x1cb)]():_0x3fbb93['data']}));const _0x42da4e=_0x1517b4[_0x3eb48c(0x1ae)](_0x2195d1=>_0x2195d1[_0x3eb48c(0x1cb)]&&_0x3eb48c(0x1ca)===_0x2195d1['data'][_0x3eb48c(0x192)]),_0x321ff7=_0x1517b4[_0x3eb48c(0x1ae)](_0x589f5b=>_0x589f5b[_0x3eb48c(0x1cb)]&&_0x3eb48c(0x1b3)===_0x589f5b[_0x3eb48c(0x1cb)][_0x3eb48c(0x192)]);if(_0x42da4e){if(_0x42da4e&&!_0x321ff7)return await submitFacultyAction(_0x1df192,'checkout');{const _0x40429f=_0x1517b4['find'](_0x1126ea=>_0x1126ea[_0x3eb48c(0x1cb)]&&'checkout'===_0x1126ea[_0x3eb48c(0x1cb)]['action']),_0xbb4c50=_0x40429f&&_0x40429f[_0x3eb48c(0x1cb)]&&_0x40429f['data']['timestamp']&&_0x40429f[_0x3eb48c(0x1cb)][_0x3eb48c(0x1af)][_0x3eb48c(0x1d6)]?_0x40429f[_0x3eb48c(0x1cb)][_0x3eb48c(0x1af)][_0x3eb48c(0x1d6)]()['toLocaleTimeString']():null;throw new Error(_0x3eb48c(0x195)+(_0xbb4c50?_0x3eb48c(0x1b8)+_0xbb4c50:'')+'.');}}return await submitFacultyAction(_0x1df192,_0x3eb48c(0x1ca));}function formatTimeFromTimestamp(_0x221bd7){const _0x5d2c44=_0x1967;if(!_0x221bd7)return'';if(_0x221bd7[_0x5d2c44(0x1d6)]&&_0x5d2c44(0x1a6)==typeof _0x221bd7[_0x5d2c44(0x1d6)])try{return _0x221bd7['toDate']()[_0x5d2c44(0x1c1)]();}catch(_0x5c9b94){}return _0x221bd7 instanceof Date?_0x221bd7['toLocaleTimeString']():String(_0x221bd7);}async function performFacultyLog(_0x3179f2){const _0x44b238=_0x1967,_0x96b7b5='login'===_0x3179f2?_0x44b238(0x1ca):_0x44b238(0x1ab)===_0x3179f2?'checkout':null;if(!_0x96b7b5)return void alert(_0x44b238(0x1c3));let _0x495c76;try{_0x495c76=await getCurrentPositionPromise();}catch(_0x2fb2c6){return void(_0x2fb2c6&&void 0x0!==_0x2fb2c6['code']?0x1===_0x2fb2c6[_0x44b238(0x189)]?alert(_0x44b238(0x197)):0x2===_0x2fb2c6[_0x44b238(0x189)]?alert(_0x44b238(0x1b5)):0x3===_0x2fb2c6['code']?alert('Location\x20request\x20timed\x20out.\x20Try\x20again.'):alert(_0x44b238(0x1b9)+(_0x2fb2c6['message']||_0x2fb2c6)):alert(_0x44b238(0x1b9)+(_0x2fb2c6&&_0x2fb2c6[_0x44b238(0x1c6)]?_0x2fb2c6[_0x44b238(0x1c6)]:_0x2fb2c6)));}const _0x482628=_0x495c76[_0x44b238(0x19c)][_0x44b238(0x1a7)],_0x2a3657=_0x495c76[_0x44b238(0x19c)][_0x44b238(0x1bf)],_0x4e87cd=_0x495c76[_0x44b238(0x19c)][_0x44b238(0x1c2)],_0x37a45b=haversine(_0x482628,_0x2a3657,19.155,73.0368);if(!isFinite(_0x37a45b)||_0x37a45b>0x1312d00)return void alert(_0x44b238(0x1ad)+Math[_0x44b238(0x1bc)](_0x37a45b)+'\x20m).\x20Check\x20location\x20accuracy/permissions.');if(_0x37a45b>0x32)return void alert(_0x44b238(0x1d0)+(_0x44b238(0x1ca)===_0x96b7b5?_0x44b238(0x1a5):'check\x20out')+_0x44b238(0x1cd)+_0x37a45b[_0x44b238(0x1d4)](0x1)+_0x44b238(0x1aa));let _0x940ea4=_0x44b238(0x1a2)==typeof window['loggedInTeacher']&&window['loggedInTeacher'][_0x44b238(0x1a9)]()?window[_0x44b238(0x1c8)][_0x44b238(0x1a9)]():null;if(!_0x940ea4){const _0x3918d8=prompt((_0x44b238(0x1ca)===_0x96b7b5?_0x44b238(0x18d):'Check\x20Out')+_0x44b238(0x1a3));if(!_0x3918d8||!_0x3918d8[_0x44b238(0x1a9)]())return void alert(_0x44b238(0x1d1));_0x940ea4=_0x3918d8[_0x44b238(0x1a9)]();}try{const _0xe5e5ef=await submitFacultyAction(_0x940ea4,_0x96b7b5),_0x32bdd2=_0xe5e5ef&&_0xe5e5ef[_0x44b238(0x1b2)]&&_0xe5e5ef['payload'][_0x44b238(0x1af)]?formatTimeFromTimestamp(_0xe5e5ef[_0x44b238(0x1b2)][_0x44b238(0x1af)]):new Date()['toLocaleTimeString']();alert((_0x44b238(0x1ca)===_0x96b7b5?_0x44b238(0x19e):_0x44b238(0x18b))+_0x44b238(0x1a1)+_0x940ea4+_0x44b238(0x1b8)+_0x32bdd2+_0x44b238(0x1cd)+_0x37a45b['toFixed'](0x1)+_0x44b238(0x188)+(null!=_0x4e87cd?_0x4e87cd+'\x20m':_0x44b238(0x194))+').');}catch(_0x4be4cb){alert(_0x4be4cb&&_0x4be4cb[_0x44b238(0x1c6)]?_0x4be4cb['message']:'Failed\x20to\x20save\x20faculty\x20attendance.'),console[_0x44b238(0x18c)](_0x44b238(0x19d),_0x4be4cb);}}function logIn(){const _0x7343d9=_0x1967;performFacultyLog(_0x7343d9(0x1bb));}function logOut(){const _0xea2b95=_0x1967;performFacultyLog(_0xea2b95(0x1ab));}
