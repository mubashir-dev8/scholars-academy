(function(_0x296334,_0x52bf12){const _0x4349c8=_0x2500,_0x1e0753=_0x296334();while(!![]){try{const _0x48efc9=parseInt(_0x4349c8(0x15d))/0x1*(-parseInt(_0x4349c8(0x195))/0x2)+parseInt(_0x4349c8(0x147))/0x3+parseInt(_0x4349c8(0x190))/0x4+parseInt(_0x4349c8(0x145))/0x5*(-parseInt(_0x4349c8(0x16f))/0x6)+parseInt(_0x4349c8(0x174))/0x7*(parseInt(_0x4349c8(0x14e))/0x8)+parseInt(_0x4349c8(0x13b))/0x9*(parseInt(_0x4349c8(0x16e))/0xa)+-parseInt(_0x4349c8(0x156))/0xb*(parseInt(_0x4349c8(0x13c))/0xc);if(_0x48efc9===_0x52bf12)break;else _0x1e0753['push'](_0x1e0753['shift']());}catch(_0x1670d3){_0x1e0753['push'](_0x1e0753['shift']());}}}(_0x3d45,0x4d5c1));const TARGET_LAT=19.155,TARGET_LNG=73.0368,ALLOWED_RADIUS_METERS=0x32,BUTTON_DISABLE_MS=0x1770;function toRad(_0x4b3b1d){return _0x4b3b1d*Math['PI']/0xb4;}function haversine(_0x1ff60b,_0x37caa7,_0x497a8a,_0x2a089d){const _0x5f3bd3=_0x2500,_0x3d0889=toRad(_0x497a8a-_0x1ff60b),_0x2bf925=toRad(_0x2a089d-_0x37caa7),_0x5621af=Math['sin'](_0x3d0889/0x2)*Math[_0x5f3bd3(0x171)](_0x3d0889/0x2)+Math['cos'](toRad(_0x1ff60b))*Math['cos'](toRad(_0x497a8a))*Math[_0x5f3bd3(0x171)](_0x2bf925/0x2)*Math[_0x5f3bd3(0x171)](_0x2bf925/0x2);return 0x6136b8*(0x2*Math[_0x5f3bd3(0x189)](Math[_0x5f3bd3(0x153)](_0x5621af),Math[_0x5f3bd3(0x153)](0x1-_0x5621af)));}function getCurrentPositionPromise(_0x433171){return new Promise((_0x558d37,_0xcaf059)=>{const _0x53d4ca=_0x2500;if(!navigator[_0x53d4ca(0x184)])return _0xcaf059(new Error(_0x53d4ca(0x18c)));navigator[_0x53d4ca(0x184)]['getCurrentPosition'](_0x558d37,_0x2edf0e=>_0xcaf059(_0x2edf0e),_0x433171||{'enableHighAccuracy':!0x0,'timeout':0x3a98,'maximumAge':0x0});});}function getLocalISODate(){const _0x55151b=_0x2500;return new Date()[_0x55151b(0x179)](_0x55151b(0x17a));}async function submitFacultyAction(_0x3e8072,_0x67bd0a){const _0x198873=_0x2500;if(!window['db'])throw new Error(_0x198873(0x197));if(!_0x3e8072||!_0x3e8072[_0x198873(0x17d)]())throw new Error('Faculty\x20name\x20is\x20required.');_0x3e8072=_0x3e8072[_0x198873(0x17d)]();const _0x45f6b8=getLocalISODate(),_0x528a3d=window[_0x198873(0x194)](window['db'],_0x198873(0x16c)),_0x5478c0=window[_0x198873(0x182)](_0x528a3d,window[_0x198873(0x162)](_0x198873(0x137),'==',_0x3e8072),window[_0x198873(0x162)](_0x198873(0x192),'==',_0x45f6b8)),_0x44cd28=await window[_0x198873(0x17f)](_0x5478c0),_0x29c549=[];_0x44cd28['forEach'](_0x4a6986=>_0x29c549[_0x198873(0x15c)]({'id':_0x4a6986['id'],'data':_0x198873(0x152)==typeof _0x4a6986[_0x198873(0x173)]?_0x4a6986[_0x198873(0x173)]():_0x4a6986[_0x198873(0x173)]}));const _0x51d43d=_0x29c549[_0x198873(0x141)](_0x16d42a=>_0x16d42a['data']&&_0x198873(0x193)===_0x16d42a['data']['action']),_0x1cfe36=_0x29c549[_0x198873(0x141)](_0x536d34=>_0x536d34[_0x198873(0x173)]&&'checkout'===_0x536d34['data'][_0x198873(0x178)]);if(_0x198873(0x193)===_0x67bd0a){if(_0x51d43d){const _0x10520f=_0x29c549[_0x198873(0x172)](_0x4a4e37=>_0x4a4e37[_0x198873(0x173)]&&_0x198873(0x193)===_0x4a4e37[_0x198873(0x173)][_0x198873(0x178)]),_0x52134a=_0x10520f&&_0x10520f[_0x198873(0x173)]&&_0x10520f['data'][_0x198873(0x158)]&&_0x10520f[_0x198873(0x173)][_0x198873(0x158)]['toDate']?_0x10520f[_0x198873(0x173)][_0x198873(0x158)]['toDate']()[_0x198873(0x15a)]():_0x10520f&&_0x10520f['data']&&_0x10520f[_0x198873(0x173)][_0x198873(0x158)]?String(_0x10520f[_0x198873(0x173)][_0x198873(0x158)]):null;throw new Error(_0x198873(0x187)+(_0x52134a?_0x198873(0x14b)+_0x52134a:'')+'.');}const _0x5c1011={'faculty':_0x3e8072,'action':_0x198873(0x193),'timestamp':window[_0x198873(0x167)]?window[_0x198873(0x167)][_0x198873(0x18a)](new Date()):new Date(),'date':_0x45f6b8};return{'added':await window[_0x198873(0x148)](_0x528a3d,_0x5c1011),'payload':_0x5c1011};}if(_0x198873(0x151)===_0x67bd0a){if(!_0x51d43d)throw new Error(_0x198873(0x154));if(_0x1cfe36){const _0x2bd182=_0x29c549['find'](_0x317c2c=>_0x317c2c[_0x198873(0x173)]&&_0x198873(0x151)===_0x317c2c['data']['action']),_0x32382a=_0x2bd182&&_0x2bd182['data']&&_0x2bd182['data'][_0x198873(0x158)]&&_0x2bd182['data'][_0x198873(0x158)][_0x198873(0x18e)]?_0x2bd182['data']['timestamp'][_0x198873(0x18e)]()['toLocaleTimeString']():_0x2bd182&&_0x2bd182['data']&&_0x2bd182[_0x198873(0x173)][_0x198873(0x158)]?String(_0x2bd182[_0x198873(0x173)][_0x198873(0x158)]):null;throw new Error(_0x198873(0x142)+(_0x32382a?_0x198873(0x14b)+_0x32382a:'')+'.');}const _0x1fb9de={'faculty':_0x3e8072,'action':_0x198873(0x151),'timestamp':window[_0x198873(0x167)]?window[_0x198873(0x167)][_0x198873(0x18a)](new Date()):new Date(),'date':_0x45f6b8};return{'added':await window['addDoc'](_0x528a3d,_0x1fb9de),'payload':_0x1fb9de};}throw new Error(_0x198873(0x18f));}async function decideAndSubmitFacultyRecord(_0x3c67b7){const _0x4c1389=_0x2500;if(!window['db'])throw new Error(_0x4c1389(0x181));if(!_0x3c67b7||!_0x3c67b7[_0x4c1389(0x17d)]())throw new Error(_0x4c1389(0x140));_0x3c67b7=_0x3c67b7[_0x4c1389(0x17d)]();const _0x4eea37=getLocalISODate(),_0x51de15=window[_0x4c1389(0x194)](window['db'],_0x4c1389(0x16c)),_0x4b8ee2=window[_0x4c1389(0x182)](_0x51de15,window[_0x4c1389(0x162)](_0x4c1389(0x137),'==',_0x3c67b7),window['where'](_0x4c1389(0x192),'==',_0x4eea37)),_0x43d5ce=await window[_0x4c1389(0x17f)](_0x4b8ee2),_0x22a9a5=[];_0x43d5ce[_0x4c1389(0x186)](_0x57d562=>_0x22a9a5[_0x4c1389(0x15c)]({'id':_0x57d562['id'],'data':_0x4c1389(0x152)==typeof _0x57d562[_0x4c1389(0x173)]?_0x57d562[_0x4c1389(0x173)]():_0x57d562['data']}));const _0x238a2d=_0x22a9a5['some'](_0x5a2079=>_0x5a2079[_0x4c1389(0x173)]&&'checkin'===_0x5a2079[_0x4c1389(0x173)][_0x4c1389(0x178)]),_0x303c00=_0x22a9a5[_0x4c1389(0x141)](_0x1a2ace=>_0x1a2ace[_0x4c1389(0x173)]&&_0x4c1389(0x151)===_0x1a2ace['data'][_0x4c1389(0x178)]);if(_0x238a2d){if(_0x238a2d&&!_0x303c00)return await submitFacultyAction(_0x3c67b7,_0x4c1389(0x151));{const _0x33f2c7=_0x22a9a5[_0x4c1389(0x172)](_0x487173=>_0x487173[_0x4c1389(0x173)]&&'checkout'===_0x487173[_0x4c1389(0x173)][_0x4c1389(0x178)]),_0x1da033=_0x33f2c7&&_0x33f2c7[_0x4c1389(0x173)]&&_0x33f2c7[_0x4c1389(0x173)][_0x4c1389(0x158)]&&_0x33f2c7[_0x4c1389(0x173)][_0x4c1389(0x158)][_0x4c1389(0x18e)]?_0x33f2c7['data'][_0x4c1389(0x158)]['toDate']()[_0x4c1389(0x15a)]():null;throw new Error(_0x4c1389(0x142)+(_0x1da033?_0x4c1389(0x14b)+_0x1da033:'')+'.');}}return await submitFacultyAction(_0x3c67b7,_0x4c1389(0x193));}function formatTimeFromTimestamp(_0x192a0f){const _0x2f2767=_0x2500;if(!_0x192a0f)return'';if(_0x192a0f['toDate']&&_0x2f2767(0x152)==typeof _0x192a0f[_0x2f2767(0x18e)])try{return _0x192a0f[_0x2f2767(0x18e)]()[_0x2f2767(0x15a)]();}catch(_0x45e9ae){}return _0x192a0f instanceof Date?_0x192a0f[_0x2f2767(0x15a)]():String(_0x192a0f);}function disableElementForMs(_0x6242a2,_0x31da48){const _0x52cdc5=_0x2500;try{if(!(_0x6242a2&&_0x6242a2 instanceof HTMLElement))return;const _0x3d2a91=_0x6242a2[_0x52cdc5(0x17b)];_0x6242a2[_0x52cdc5(0x17b)]=!0x0,_0x6242a2[_0x52cdc5(0x18b)](_0x52cdc5(0x15b),_0x52cdc5(0x16a)),_0x6242a2[_0x52cdc5(0x160)][_0x52cdc5(0x161)](_0x52cdc5(0x14c)),setTimeout(()=>{const _0x17e0d3=_0x52cdc5;_0x6242a2[_0x17e0d3(0x17b)]=_0x3d2a91,_0x3d2a91||_0x6242a2[_0x17e0d3(0x143)](_0x17e0d3(0x15b)),_0x6242a2[_0x17e0d3(0x160)]['remove'](_0x17e0d3(0x14c));},_0x31da48);}catch(_0x299696){console[_0x52cdc5(0x163)](_0x52cdc5(0x13e),_0x299696);}}function _0x3d45(){const _0x2a54c0=['Firebase\x20is\x20not\x20initialized.\x20Check\x20firebase.js\x20and\x20that\x20window.db\x20exists.','Too\x20far\x20to\x20','faculty','logoutBtnDesktop','login','Failed\x20to\x20save\x20faculty\x20attendance.','1246743MuRqbb','5628pLhAZW','loginBtnDesktop','Failed\x20to\x20temporarily\x20disable\x20element','error','Faculty\x20name\x20required.','some','You\x20have\x20already\x20checked\x20out\x20today','removeAttribute','latitude','1254785LSGuwx','\x20â€”\x20Enter\x20faculty\x20name:','434901ZzGwmL','addDoc','string','loginBtnMobile','\x20at\x20','temporarily-disabled','toLowerCase','1096xrhpeD','payload','textContent','checkout','function','sqrt','No\x20check-in\x20found\x20for\x20today.\x20Cannot\x20check\x20out\x20before\x20checking\x20in.','Invalid\x20action.\x20Use\x20login\x20or\x20logout.','1419BtNuxk','querySelectorAll','timestamp','Faculty\x20name\x20is\x20required.\x20Aborting.','toLocaleTimeString','aria-disabled','push','7361PclKqa','Position\x20unavailable.\x20Try\x20again\x20or\x20move\x20to\x20a\x20location\x20with\x20better\x20signal.','.\x0aDistance:\x20','classList','add','where','warn','Error\x20getting\x20location:\x20','\x20m).\x20Check\x20location\x20accuracy/permissions.','Computed\x20distance\x20looks\x20unrealistic\x20(','Timestamp','round','Checked\x20out','true','getElementById','facAtt','n/a','10sRytOu','12YsMeiT','message','sin','find','data','22757OCSvdf','code','button[onclick*=\x22','accuracy','action','toLocaleDateString','en-CA','disabled','querySelector','trim','loggedInTeacher','getDocs','coords','Firebase\x20not\x20initialized.','query','Location\x20request\x20timed\x20out.\x20Try\x20again.','geolocation','logout','forEach','You\x20have\x20already\x20checked\x20in\x20today','longitude','atan2','fromDate','setAttribute','Geolocation\x20not\x20supported','\x20for\x20','toDate','Invalid\x20actionArg.\x20Use\x20\x22checkin\x22\x20or\x20\x22checkout\x22.','1514360czwlJb','Location\x20permission\x20denied.\x20Please\x20allow\x20location\x20access\x20and\x20try\x20again.','date','checkin','collection','62OBFJDW','check\x20in'];_0x3d45=function(){return _0x2a54c0;};return _0x3d45();}function pickButtonCandidateForAction(_0x16e2d9){const _0x13467f=_0x2500,_0x2df97a={'login':[_0x13467f(0x13d),_0x13467f(0x14a)],'logout':[_0x13467f(0x138),'logoutBtnMobile']}[_0x16e2d9]||[];for(const _0x3c499e of _0x2df97a){const _0x15c4e5=document[_0x13467f(0x16b)](_0x3c499e);if(_0x15c4e5)return _0x15c4e5;}let _0x30cf39=document[_0x13467f(0x17c)](_0x13467f(0x176)+_0x16e2d9+'\x22]');if(_0x30cf39)return _0x30cf39;return Array['from'](document[_0x13467f(0x157)]('button'))['find'](_0x29f40f=>_0x29f40f[_0x13467f(0x150)]&&_0x29f40f[_0x13467f(0x150)][_0x13467f(0x14d)]()['includes'](_0x16e2d9))||null;}function disableClickedButton(_0x2fb3b7,_0x3631f5){disableElementForMs(_0x2fb3b7&&_0x2fb3b7 instanceof HTMLElement?_0x2fb3b7:pickButtonCandidateForAction(_0x3631f5),0x1770);}async function performFacultyLog(_0x178b57){const _0x24e66d=_0x2500,_0x4af5b5='login'===_0x178b57?_0x24e66d(0x193):_0x24e66d(0x185)===_0x178b57?_0x24e66d(0x151):null;if(!_0x4af5b5)return void alert(_0x24e66d(0x155));let _0x4e84e4;try{_0x4e84e4=await getCurrentPositionPromise();}catch(_0x1d6552){return void(_0x1d6552&&void 0x0!==_0x1d6552['code']?0x1===_0x1d6552[_0x24e66d(0x175)]?alert(_0x24e66d(0x191)):0x2===_0x1d6552['code']?alert(_0x24e66d(0x15e)):0x3===_0x1d6552[_0x24e66d(0x175)]?alert(_0x24e66d(0x183)):alert(_0x24e66d(0x164)+(_0x1d6552['message']||_0x1d6552)):alert(_0x24e66d(0x164)+(_0x1d6552&&_0x1d6552[_0x24e66d(0x170)]?_0x1d6552[_0x24e66d(0x170)]:_0x1d6552)));}const _0xd5ec1a=_0x4e84e4['coords'][_0x24e66d(0x144)],_0x297b47=_0x4e84e4[_0x24e66d(0x180)][_0x24e66d(0x188)],_0x583ba4=_0x4e84e4[_0x24e66d(0x180)][_0x24e66d(0x177)],_0x44a3a9=haversine(_0xd5ec1a,_0x297b47,19.155,73.0368);if(!isFinite(_0x44a3a9)||_0x44a3a9>0x1312d00)return void alert(_0x24e66d(0x166)+Math[_0x24e66d(0x168)](_0x44a3a9)+_0x24e66d(0x165));if(_0x44a3a9>0x32)return void alert(_0x24e66d(0x136)+(_0x24e66d(0x193)===_0x4af5b5?_0x24e66d(0x196):'check\x20out')+_0x24e66d(0x15f)+_0x44a3a9['toFixed'](0x1)+'.Reach\x20Classes\x20and\x20do\x20Log\x20in/out');let _0xff250a=_0x24e66d(0x149)==typeof window[_0x24e66d(0x17e)]&&window[_0x24e66d(0x17e)][_0x24e66d(0x17d)]()?window[_0x24e66d(0x17e)][_0x24e66d(0x17d)]():null;if(!_0xff250a){const _0x6052da=prompt((_0x24e66d(0x193)===_0x4af5b5?'Check\x20In':'Check\x20Out')+_0x24e66d(0x146));if(!_0x6052da||!_0x6052da[_0x24e66d(0x17d)]())return void alert(_0x24e66d(0x159));_0xff250a=_0x6052da[_0x24e66d(0x17d)]();}try{const _0x4ea983=await submitFacultyAction(_0xff250a,_0x4af5b5),_0x28526f=_0x4ea983&&_0x4ea983['payload']&&_0x4ea983['payload'][_0x24e66d(0x158)]?formatTimeFromTimestamp(_0x4ea983[_0x24e66d(0x14f)]['timestamp']):new Date()['toLocaleTimeString']();alert((_0x24e66d(0x193)===_0x4af5b5?'Checked\x20in':_0x24e66d(0x169))+_0x24e66d(0x18d)+_0xff250a+_0x24e66d(0x14b)+_0x28526f+_0x24e66d(0x15f)+_0x44a3a9['toFixed'](0x1)+'\x20m\x20(accuracy:\x20'+(null!=_0x583ba4?_0x583ba4+'\x20m':_0x24e66d(0x16d))+').');}catch(_0x1cd0d4){alert(_0x1cd0d4&&_0x1cd0d4['message']?_0x1cd0d4[_0x24e66d(0x170)]:_0x24e66d(0x13a)),console[_0x24e66d(0x13f)]('Faculty\x20attendance\x20error:',_0x1cd0d4);}}function logIn(_0x1e603a){const _0x2375ea=_0x2500;disableClickedButton(_0x1e603a,_0x2375ea(0x139)),performFacultyLog(_0x2375ea(0x139));}function _0x2500(_0xfc905,_0x1b8934){_0xfc905=_0xfc905-0x136;const _0x3d457a=_0x3d45();let _0x25009d=_0x3d457a[_0xfc905];return _0x25009d;}function logOut(_0xbdcb5a){const _0x3c9725=_0x2500;disableClickedButton(_0xbdcb5a,_0x3c9725(0x185)),performFacultyLog('logout');}
