const _0x3db32a=_0x56c6;(function(_0x3edca7,_0x5bdb84){const _0x52f204=_0x56c6,_0x190bf5=_0x3edca7();while(!![]){try{const _0x26d63c=parseInt(_0x52f204(0x1a7))/0x1+-parseInt(_0x52f204(0x195))/0x2*(-parseInt(_0x52f204(0x1a1))/0x3)+-parseInt(_0x52f204(0x1b7))/0x4+-parseInt(_0x52f204(0x19e))/0x5*(parseInt(_0x52f204(0x1ed))/0x6)+-parseInt(_0x52f204(0x1d7))/0x7+parseInt(_0x52f204(0x1e9))/0x8*(parseInt(_0x52f204(0x1ec))/0x9)+parseInt(_0x52f204(0x1c0))/0xa;if(_0x26d63c===_0x5bdb84)break;else _0x190bf5['push'](_0x190bf5['shift']());}catch(_0xe4a868){_0x190bf5['push'](_0x190bf5['shift']());}}}(_0x1303,0xd09ad));const TARGET_LAT=19.155,TARGET_LNG=73.0368,ALLOWED_RADIUS_METERS=0x32;function toRad(_0x7bfc3c){return _0x7bfc3c*Math['PI']/0xb4;}function haversine(_0x500701,_0xc4f279,_0x307be4,_0x12088a){const _0xd3c300=_0x56c6,_0x12d3be=toRad(_0x307be4-_0x500701),_0x5ee28d=toRad(_0x12088a-_0xc4f279),_0x56d52a=Math['sin'](_0x12d3be/0x2)*Math['sin'](_0x12d3be/0x2)+Math[_0xd3c300(0x1ae)](toRad(_0x500701))*Math[_0xd3c300(0x1ae)](toRad(_0x307be4))*Math[_0xd3c300(0x1b9)](_0x5ee28d/0x2)*Math[_0xd3c300(0x1b9)](_0x5ee28d/0x2);return 0x6136b8*(0x2*Math['atan2'](Math[_0xd3c300(0x1d5)](_0x56d52a),Math[_0xd3c300(0x1d5)](0x1-_0x56d52a)));}function getCurrentPositionPromise(_0x222982){return new Promise((_0x49e7e8,_0x316b52)=>{const _0x563642=_0x56c6;if(!navigator[_0x563642(0x1c6)])return _0x316b52(new Error(_0x563642(0x1d8)));navigator[_0x563642(0x1c6)]['getCurrentPosition'](_0x49e7e8,_0x197055=>_0x316b52(_0x197055),_0x222982||{'enableHighAccuracy':!0x0,'timeout':0x3a98,'maximumAge':0x0});});}function getLocalISODate(){const _0x1914ab=_0x56c6;return new Date()[_0x1914ab(0x1bb)](_0x1914ab(0x1e8));}function showProcessingModal(_0x537110=_0x3db32a(0x1be),_0x3987f5='Please\x20wait'){const _0xf63ec5=_0x3db32a;try{const _0x2e11af=document[_0xf63ec5(0x1e7)](_0xf63ec5(0x1c5)),_0x528818=document[_0xf63ec5(0x1e7)](_0xf63ec5(0x1a5)),_0x1a1867=document[_0xf63ec5(0x1e7)](_0xf63ec5(0x1ab));_0x528818&&(_0x528818[_0xf63ec5(0x1ca)]=_0x537110),_0x1a1867&&(_0x1a1867[_0xf63ec5(0x1ca)]=_0x3987f5),_0x2e11af&&_0x2e11af[_0xf63ec5(0x1b3)](_0xf63ec5(0x1cd),_0xf63ec5(0x1e3));}catch(_0x4c8f24){console['warn'](_0xf63ec5(0x1bf),_0x4c8f24);}}function _0x1303(){const _0x65f608=['setAttribute','checkin','check\x20out','action','1326468HNbCpG','collection','sin','Faculty\x20name\x20required.','toLocaleDateString','Checking\x20out…','some','Processing…','Could\x20not\x20show\x20processing\x20modal','2184660KJrzAb','timestamp','coords','Check\x20In','Location\x20permission\x20denied.\x20Please\x20allow\x20location\x20access\x20and\x20try\x20again.','processingOverlay','geolocation','You\x20have\x20already\x20checked\x20out\x20today','query','Check\x20Out','textContent','date','logout','aria-hidden','toDate','Faculty\x20name\x20is\x20required.\x20Aborting.','forEach','n/a','Getting\x20location\x20and\x20saving\x20record','data','payload','sqrt','string','7100919lgYEvM','Geolocation\x20not\x20supported','Could\x20not\x20hide\x20processing\x20modal','toLocaleTimeString','\x20at\x20','faculty','Invalid\x20actionArg.\x20Use\x20\x22checkin\x22\x20or\x20\x22checkout\x22.','Failed\x20to\x20save\x20faculty\x20attendance.','find','message','\x20for\x20','longitude','false','fromDate','Checked\x20out','Position\x20unavailable.\x20Try\x20again\x20or\x20move\x20to\x20a\x20location\x20with\x20better\x20signal.','getElementById','en-CA','616RrTxLd','true','push','124101WsFREL','14622DtQnWU','1354FgBovi','Error\x20getting\x20location:\x20','toFixed','loggedInTeacher','function','.\x0aDistance:\x20','\x20m).\x20Check\x20location\x20accuracy/permissions.','getDocs','addDoc','1915fjeVFb','Computed\x20distance\x20looks\x20unrealistic\x20(','Firebase\x20is\x20not\x20initialized.\x20Check\x20firebase.js\x20and\x20that\x20window.db\x20exists.','1566QRFfsv','Checked\x20in','Location\x20request\x20timed\x20out.\x20Try\x20again.','Timestamp','processingTitle','\x20—\x20Enter\x20faculty\x20name:','1500237PmbhFJ','login','\x20m\x20(accuracy:\x20','Faculty\x20name\x20is\x20required.','processingSub','checkout','where','cos','warn','trim','Faculty\x20attendance\x20error:','facAtt'];_0x1303=function(){return _0x65f608;};return _0x1303();}function hideProcessingModal(){const _0xb679cf=_0x3db32a;try{const _0x28fabb=document[_0xb679cf(0x1e7)](_0xb679cf(0x1c5));_0x28fabb&&_0x28fabb[_0xb679cf(0x1b3)](_0xb679cf(0x1cd),_0xb679cf(0x1ea));}catch(_0x2b5297){console[_0xb679cf(0x1af)](_0xb679cf(0x1d9),_0x2b5297);}}async function submitFacultyAction(_0x45848d,_0x490084){const _0x3c107a=_0x3db32a;if(!window['db'])throw new Error(_0x3c107a(0x1a0));if(!_0x45848d||!_0x45848d[_0x3c107a(0x1b0)]())throw new Error(_0x3c107a(0x1aa));_0x45848d=_0x45848d[_0x3c107a(0x1b0)]();const _0x5b53af=getLocalISODate(),_0x103a54=window[_0x3c107a(0x1b8)](window['db'],_0x3c107a(0x1b2)),_0x2e84a0=window[_0x3c107a(0x1c8)](_0x103a54,window[_0x3c107a(0x1ad)](_0x3c107a(0x1dc),'==',_0x45848d),window['where'](_0x3c107a(0x1cb),'==',_0x5b53af)),_0x580ae2=await window['getDocs'](_0x2e84a0),_0x519c01=[];_0x580ae2[_0x3c107a(0x1d0)](_0x2685e8=>_0x519c01[_0x3c107a(0x1eb)]({'id':_0x2685e8['id'],'data':_0x3c107a(0x199)==typeof _0x2685e8['data']?_0x2685e8['data']():_0x2685e8[_0x3c107a(0x1d3)]}));const _0x166f32=_0x519c01[_0x3c107a(0x1bd)](_0x120e86=>_0x120e86[_0x3c107a(0x1d3)]&&_0x3c107a(0x1b4)===_0x120e86['data'][_0x3c107a(0x1b6)]),_0x33fde2=_0x519c01[_0x3c107a(0x1bd)](_0x1e0783=>_0x1e0783[_0x3c107a(0x1d3)]&&'checkout'===_0x1e0783['data'][_0x3c107a(0x1b6)]);if('checkin'===_0x490084){if(_0x166f32){const _0x3a1c3c=_0x519c01['find'](_0x147c2c=>_0x147c2c['data']&&'checkin'===_0x147c2c[_0x3c107a(0x1d3)]['action']),_0xf9e52f=_0x3a1c3c&&_0x3a1c3c[_0x3c107a(0x1d3)]&&_0x3a1c3c['data'][_0x3c107a(0x1c1)]&&_0x3a1c3c['data'][_0x3c107a(0x1c1)][_0x3c107a(0x1ce)]?_0x3a1c3c[_0x3c107a(0x1d3)][_0x3c107a(0x1c1)][_0x3c107a(0x1ce)]()[_0x3c107a(0x1da)]():_0x3a1c3c&&_0x3a1c3c[_0x3c107a(0x1d3)]&&_0x3a1c3c['data'][_0x3c107a(0x1c1)]?String(_0x3a1c3c[_0x3c107a(0x1d3)]['timestamp']):null;throw new Error('You\x20have\x20already\x20checked\x20in\x20today'+(_0xf9e52f?'\x20at\x20'+_0xf9e52f:'')+'.');}const _0x3bed73={'faculty':_0x45848d,'action':_0x3c107a(0x1b4),'timestamp':window[_0x3c107a(0x1a4)]?window[_0x3c107a(0x1a4)][_0x3c107a(0x1e4)](new Date()):new Date(),'date':_0x5b53af};return{'added':await window[_0x3c107a(0x19d)](_0x103a54,_0x3bed73),'payload':_0x3bed73};}if(_0x3c107a(0x1ac)===_0x490084){if(!_0x166f32)throw new Error('No\x20check-in\x20found\x20for\x20today.\x20Cannot\x20check\x20out\x20before\x20checking\x20in.');if(_0x33fde2){const _0x130e8a=_0x519c01[_0x3c107a(0x1df)](_0x5f38fa=>_0x5f38fa[_0x3c107a(0x1d3)]&&_0x3c107a(0x1ac)===_0x5f38fa[_0x3c107a(0x1d3)][_0x3c107a(0x1b6)]),_0x36c921=_0x130e8a&&_0x130e8a[_0x3c107a(0x1d3)]&&_0x130e8a['data'][_0x3c107a(0x1c1)]&&_0x130e8a['data'][_0x3c107a(0x1c1)][_0x3c107a(0x1ce)]?_0x130e8a['data'][_0x3c107a(0x1c1)][_0x3c107a(0x1ce)]()['toLocaleTimeString']():_0x130e8a&&_0x130e8a[_0x3c107a(0x1d3)]&&_0x130e8a[_0x3c107a(0x1d3)][_0x3c107a(0x1c1)]?String(_0x130e8a['data']['timestamp']):null;throw new Error(_0x3c107a(0x1c7)+(_0x36c921?_0x3c107a(0x1db)+_0x36c921:'')+'.');}const _0x271cc8={'faculty':_0x45848d,'action':_0x3c107a(0x1ac),'timestamp':window[_0x3c107a(0x1a4)]?window[_0x3c107a(0x1a4)][_0x3c107a(0x1e4)](new Date()):new Date(),'date':_0x5b53af};return{'added':await window['addDoc'](_0x103a54,_0x271cc8),'payload':_0x271cc8};}throw new Error(_0x3c107a(0x1dd));}async function decideAndSubmitFacultyRecord(_0x14d885){const _0x1cf3b6=_0x3db32a;if(!window['db'])throw new Error('Firebase\x20not\x20initialized.');if(!_0x14d885||!_0x14d885[_0x1cf3b6(0x1b0)]())throw new Error(_0x1cf3b6(0x1ba));_0x14d885=_0x14d885[_0x1cf3b6(0x1b0)]();const _0x58812a=getLocalISODate(),_0x3ce0d9=window[_0x1cf3b6(0x1b8)](window['db'],'facAtt'),_0x3a9760=window[_0x1cf3b6(0x1c8)](_0x3ce0d9,window[_0x1cf3b6(0x1ad)](_0x1cf3b6(0x1dc),'==',_0x14d885),window['where'](_0x1cf3b6(0x1cb),'==',_0x58812a)),_0x3f502d=await window[_0x1cf3b6(0x19c)](_0x3a9760),_0x56afe6=[];_0x3f502d[_0x1cf3b6(0x1d0)](_0x178c1f=>_0x56afe6[_0x1cf3b6(0x1eb)]({'id':_0x178c1f['id'],'data':_0x1cf3b6(0x199)==typeof _0x178c1f[_0x1cf3b6(0x1d3)]?_0x178c1f[_0x1cf3b6(0x1d3)]():_0x178c1f[_0x1cf3b6(0x1d3)]}));const _0x429eab=_0x56afe6[_0x1cf3b6(0x1bd)](_0x4c835b=>_0x4c835b['data']&&_0x1cf3b6(0x1b4)===_0x4c835b[_0x1cf3b6(0x1d3)][_0x1cf3b6(0x1b6)]),_0x10fc3b=_0x56afe6['some'](_0x47ef5e=>_0x47ef5e['data']&&_0x1cf3b6(0x1ac)===_0x47ef5e[_0x1cf3b6(0x1d3)][_0x1cf3b6(0x1b6)]);if(_0x429eab){if(_0x429eab&&!_0x10fc3b)return await submitFacultyAction(_0x14d885,_0x1cf3b6(0x1ac));{const _0x55ebd9=_0x56afe6[_0x1cf3b6(0x1df)](_0xe05c96=>_0xe05c96['data']&&_0x1cf3b6(0x1ac)===_0xe05c96[_0x1cf3b6(0x1d3)]['action']),_0x5bebae=_0x55ebd9&&_0x55ebd9[_0x1cf3b6(0x1d3)]&&_0x55ebd9['data'][_0x1cf3b6(0x1c1)]&&_0x55ebd9[_0x1cf3b6(0x1d3)][_0x1cf3b6(0x1c1)]['toDate']?_0x55ebd9['data']['timestamp'][_0x1cf3b6(0x1ce)]()[_0x1cf3b6(0x1da)]():null;throw new Error('You\x20have\x20already\x20checked\x20out\x20today'+(_0x5bebae?_0x1cf3b6(0x1db)+_0x5bebae:'')+'.');}}return await submitFacultyAction(_0x14d885,_0x1cf3b6(0x1b4));}function formatTimeFromTimestamp(_0x411fd1){const _0x42d774=_0x3db32a;if(!_0x411fd1)return'';if(_0x411fd1[_0x42d774(0x1ce)]&&_0x42d774(0x199)==typeof _0x411fd1[_0x42d774(0x1ce)])try{return _0x411fd1['toDate']()[_0x42d774(0x1da)]();}catch(_0x4814c7){}return _0x411fd1 instanceof Date?_0x411fd1[_0x42d774(0x1da)]():String(_0x411fd1);}async function performFacultyLog(_0x297bff){const _0x1a23d0=_0x3db32a,_0x195bab=_0x1a23d0(0x1a8)===_0x297bff?_0x1a23d0(0x1b4):_0x1a23d0(0x1cc)===_0x297bff?_0x1a23d0(0x1ac):null;if(!_0x195bab)return void alert('Invalid\x20action.\x20Use\x20login\x20or\x20logout.');let _0x40e348,_0x3171ba=_0x1a23d0(0x1d6)==typeof window[_0x1a23d0(0x198)]&&window['loggedInTeacher']['trim']()?window[_0x1a23d0(0x198)][_0x1a23d0(0x1b0)]():null;if(!_0x3171ba){const _0x459f7b=prompt((_0x1a23d0(0x1b4)===_0x195bab?_0x1a23d0(0x1c3):_0x1a23d0(0x1c9))+_0x1a23d0(0x1a6));if(!_0x459f7b||!_0x459f7b[_0x1a23d0(0x1b0)]())return void alert(_0x1a23d0(0x1cf));_0x3171ba=_0x459f7b[_0x1a23d0(0x1b0)]();}showProcessingModal(_0x1a23d0(0x1b4)===_0x195bab?'Checking\x20in…':_0x1a23d0(0x1bc),_0x1a23d0(0x1d2));try{_0x40e348=await getCurrentPositionPromise();}catch(_0x55893b){return hideProcessingModal(),void(_0x55893b&&void 0x0!==_0x55893b['code']?0x1===_0x55893b['code']?alert(_0x1a23d0(0x1c4)):0x2===_0x55893b['code']?alert(_0x1a23d0(0x1e6)):0x3===_0x55893b['code']?alert(_0x1a23d0(0x1a3)):alert(_0x1a23d0(0x196)+(_0x55893b[_0x1a23d0(0x1e0)]||_0x55893b)):alert(_0x1a23d0(0x196)+(_0x55893b&&_0x55893b[_0x1a23d0(0x1e0)]?_0x55893b[_0x1a23d0(0x1e0)]:_0x55893b)));}const _0x3f261c=_0x40e348[_0x1a23d0(0x1c2)]['latitude'],_0x18426e=_0x40e348[_0x1a23d0(0x1c2)][_0x1a23d0(0x1e2)],_0x4fced3=_0x40e348[_0x1a23d0(0x1c2)]['accuracy'],_0x47e88a=haversine(_0x3f261c,_0x18426e,19.155,73.0368);if(!isFinite(_0x47e88a)||_0x47e88a>0x1312d00)return hideProcessingModal(),void alert(_0x1a23d0(0x19f)+Math['round'](_0x47e88a)+_0x1a23d0(0x19b));if(_0x47e88a>0x32)return hideProcessingModal(),void alert('Too\x20far\x20to\x20'+(_0x1a23d0(0x1b4)===_0x195bab?'check\x20in':_0x1a23d0(0x1b5))+_0x1a23d0(0x19a)+_0x47e88a[_0x1a23d0(0x197)](0x1)+'\x20m.\x20Reach\x20Classes\x20and\x20do\x20Log\x20in/out');try{const _0x33f4a7=await submitFacultyAction(_0x3171ba,_0x195bab);hideProcessingModal();const _0xdeeca6=_0x33f4a7&&_0x33f4a7[_0x1a23d0(0x1d4)]&&_0x33f4a7['payload'][_0x1a23d0(0x1c1)]?formatTimeFromTimestamp(_0x33f4a7[_0x1a23d0(0x1d4)][_0x1a23d0(0x1c1)]):new Date()[_0x1a23d0(0x1da)]();alert((_0x1a23d0(0x1b4)===_0x195bab?_0x1a23d0(0x1a2):_0x1a23d0(0x1e5))+_0x1a23d0(0x1e1)+_0x3171ba+_0x1a23d0(0x1db)+_0xdeeca6+_0x1a23d0(0x19a)+_0x47e88a['toFixed'](0x1)+_0x1a23d0(0x1a9)+(null!=_0x4fced3?_0x4fced3+'\x20m':_0x1a23d0(0x1d1))+').');}catch(_0x43f54e){hideProcessingModal(),alert(_0x43f54e&&_0x43f54e[_0x1a23d0(0x1e0)]?_0x43f54e[_0x1a23d0(0x1e0)]:_0x1a23d0(0x1de)),console['error'](_0x1a23d0(0x1b1),_0x43f54e);}}function logIn(){const _0x42ac87=_0x3db32a;performFacultyLog(_0x42ac87(0x1a8));}function _0x56c6(_0xdf6595,_0x3423ce){_0xdf6595=_0xdf6595-0x195;const _0x1303f5=_0x1303();let _0x56c6f9=_0x1303f5[_0xdf6595];return _0x56c6f9;}function logOut(){const _0x1ec1ec=_0x3db32a;performFacultyLog(_0x1ec1ec(0x1cc));}
