function _0x410f(_0x39e454,_0x4f3055){const _0x1728f5=_0x1728();return _0x410f=function(_0x410fa0,_0x1a039a){_0x410fa0=_0x410fa0-0x11e;let _0x4b0702=_0x1728f5[_0x410fa0];return _0x4b0702;},_0x410f(_0x39e454,_0x4f3055);}const _0x4ec116=_0x410f;(function(_0xb76cdf,_0x39d71f){const _0x3dd6fd=_0x410f,_0x49c9a1=_0xb76cdf();while(!![]){try{const _0x39c0ca=-parseInt(_0x3dd6fd(0x15a))/0x1+parseInt(_0x3dd6fd(0x14b))/0x2*(parseInt(_0x3dd6fd(0x15f))/0x3)+parseInt(_0x3dd6fd(0x167))/0x4+parseInt(_0x3dd6fd(0x13d))/0x5+-parseInt(_0x3dd6fd(0x15d))/0x6*(parseInt(_0x3dd6fd(0x13e))/0x7)+-parseInt(_0x3dd6fd(0x166))/0x8+parseInt(_0x3dd6fd(0x165))/0x9*(parseInt(_0x3dd6fd(0x139))/0xa);if(_0x39c0ca===_0x39d71f)break;else _0x49c9a1['push'](_0x49c9a1['shift']());}catch(_0x315fbc){_0x49c9a1['push'](_0x49c9a1['shift']());}}}(_0x1728,0xdfbe5));let studentData={};async function loadStudentData(){const _0x49587b=_0x410f;try{const _0x4f954c=await fetch('studentData.json');if(!_0x4f954c['ok'])throw new Error(_0x49587b(0x14a));studentData=await _0x4f954c[_0x49587b(0x14d)]();}catch(_0x1713c6){console[_0x49587b(0x11f)](_0x49587b(0x138),_0x1713c6);}}function currentMonthRangeISO(){const _0xa34822=_0x410f,_0x230e36=new Date(),_0x194312=_0x230e36[_0xa34822(0x149)](),_0x15c523=_0x230e36[_0xa34822(0x11e)](),_0x1f06c3=new Date(_0x194312,_0x15c523,0x1),_0x22f931=new Date(_0x194312,_0x15c523+0x1,0x0),_0x3bb93b=_0x5a9ec3=>String(_0x5a9ec3)[_0xa34822(0x132)](0x2,'0'),_0x346e39=_0xa326d4=>_0xa326d4[_0xa34822(0x149)]()+'-'+_0x3bb93b(_0xa326d4['getMonth']()+0x1)+'-'+_0x3bb93b(_0xa326d4['getDate']());return{'startISO':_0x346e39(_0x1f06c3),'endISO':_0x346e39(_0x22f931)};}async function fetchAttendanceForStudentThisMonth(_0x52c345){const _0x1a1a14=_0x410f;if(!window['db']||!window[_0x1a1a14(0x15e)])throw new Error(_0x1a1a14(0x159));const {startISO:_0x5b4c79,endISO:_0xd4585e}=currentMonthRangeISO(),_0x443feb=window[_0x1a1a14(0x15e)](window['db'],_0x1a1a14(0x12b));if(window[_0x1a1a14(0x158)]&&window[_0x1a1a14(0x15b)]&&window['where'])try{const _0x1f7dbc=window[_0x1a1a14(0x15b)](_0x443feb,window[_0x1a1a14(0x163)]('name','==',_0x52c345),window[_0x1a1a14(0x163)]('date','>=',_0x5b4c79),window['where'](_0x1a1a14(0x144),'<=',_0xd4585e)),_0x2853d3=await window['getDocs'](_0x1f7dbc);let _0x58162c=0x0,_0x51a7c3=0x0;const _0x2f6be0=[];return _0x2853d3[_0x1a1a14(0x12e)](_0xa4c100=>{const _0x40bc40=_0x1a1a14,_0x45d4a3=_0xa4c100[_0x40bc40(0x14c)]?_0xa4c100[_0x40bc40(0x14c)]():_0xa4c100['_document'];_0x2f6be0[_0x40bc40(0x14e)]({'id':_0xa4c100['id'],'data':_0x45d4a3});const _0x320781=(_0x45d4a3[_0x40bc40(0x130)]||'')[_0x40bc40(0x135)]();_0x40bc40(0x15c)===_0x320781?_0x58162c++:_0x40bc40(0x124)===_0x320781&&_0x51a7c3++;}),{'presentCount':_0x58162c,'absentCount':_0x51a7c3,'totalRecords':_0x58162c+_0x51a7c3,'docs':_0x2f6be0};}catch(_0x326259){console[_0x1a1a14(0x11f)]('Firestore\x20query\x20failed\x20—\x20falling\x20back\x20to\x20client-side\x20filter:',_0x326259);}if(window[_0x1a1a14(0x158)]){const _0x2190c0=await window[_0x1a1a14(0x158)](_0x443feb);let _0x2ec684=0x0,_0x4c8713=0x0;const _0x44c30c=[];return _0x2190c0[_0x1a1a14(0x12e)](_0x43ee13=>{const _0x1ba4af=_0x1a1a14,_0x66ef30=_0x43ee13[_0x1ba4af(0x14c)]?_0x43ee13[_0x1ba4af(0x14c)]():_0x43ee13['_document'],_0x34cdda=_0x66ef30[_0x1ba4af(0x144)]||'';if((_0x66ef30[_0x1ba4af(0x121)]||'')[_0x1ba4af(0x135)]()===_0x52c345&&_0x34cdda>=_0x5b4c79&&_0x34cdda<=_0xd4585e){_0x44c30c['push']({'id':_0x43ee13['id'],'data':_0x66ef30});const _0x51d05d=(_0x66ef30[_0x1ba4af(0x130)]||'')[_0x1ba4af(0x135)]();_0x1ba4af(0x15c)===_0x51d05d?_0x2ec684++:_0x1ba4af(0x124)===_0x51d05d&&_0x4c8713++;}}),{'presentCount':_0x2ec684,'absentCount':_0x4c8713,'totalRecords':_0x2ec684+_0x4c8713,'docs':_0x44c30c};}throw new Error(_0x1a1a14(0x13b));}async function showStudentDetails(_0x39ce98){const _0x18a154=_0x410f;if(!currentClass)return void alert('Please\x20select\x20a\x20class\x20first.');const _0x354dad=_0x31ff1b=>{const _0x3692f3=_0x410f;if(!_0x31ff1b)return'';const [_0x2fbc87,_0xaac8d9,_0x2701d0]=_0x31ff1b[_0x3692f3(0x146)]('-');return _0x2701d0+'/'+_0xaac8d9+'/'+_0x2fbc87;};document['getElementById'](_0x18a154(0x156))['innerHTML']=_0x18a154(0x157)+escapeHtml(_0x39ce98)+'</div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Class:</strong>\x20'+escapeHtml(currentClass)+_0x18a154(0x133);const _0x1b4c27=document['getElementById'](_0x18a154(0x12c));_0x1b4c27[_0x18a154(0x13f)][_0x18a154(0x12f)]=_0x18a154(0x160),_0x1b4c27['setAttribute'](_0x18a154(0x143),_0x18a154(0x128));const _0x36c600=document[_0x18a154(0x131)](_0x18a154(0x14f)),_0x3cef52=document['getElementById'](_0x18a154(0x152)),_0x2a721f=document[_0x18a154(0x131)]('absentDatesList'),_0x1589af=document[_0x18a154(0x131)](_0x18a154(0x129));try{_0x36c600[_0x18a154(0x141)]=_0x18a154(0x162),_0x2a721f[_0x18a154(0x141)]=_0x18a154(0x162),_0x1589af['textContent']=_0x18a154(0x162);const _0x6b4c63=await fetchAttendanceForStudentThisMonth(_0x39ce98),_0x38b26c=_0x6b4c63[_0x18a154(0x153)]||0x0,_0x501a09=_0x38b26c+(_0x6b4c63[_0x18a154(0x13a)]||0x0),_0x3ba93e=currentMonthRangeISO(),_0x8848f=_0x354dad(_0x3ba93e[_0x18a154(0x12a)]),_0x4037f6=_0x354dad(_0x3ba93e[_0x18a154(0x125)]);if(0x0===_0x501a09)return _0x36c600[_0x18a154(0x141)]=_0x18a154(0x168),_0x3cef52[_0x18a154(0x141)]='No\x20attendance\x20records\x20found\x20for\x20'+_0x39ce98+_0x18a154(0x150)+_0x8848f+'\x20and\x20'+_0x4037f6+'.',_0x2a721f[_0x18a154(0x141)]='—',void(_0x1589af[_0x18a154(0x141)]='—');const _0x267e72=Math[_0x18a154(0x12d)](_0x38b26c/_0x501a09*0x64);_0x36c600[_0x18a154(0x141)]=_0x267e72+_0x18a154(0x122)+_0x38b26c+'/'+_0x501a09+'\x20present)',_0x3cef52[_0x18a154(0x141)]='Period:\x20'+_0x8848f+_0x18a154(0x145)+_0x4037f6;const _0x84e6e2=new Set();let _0x4d9b33=0x0;(_0x6b4c63[_0x18a154(0x16a)]||[])[_0x18a154(0x12e)](_0x43f6a7=>{const _0x217d81=_0x18a154,_0x1119ad=_0x43f6a7[_0x217d81(0x14c)]||{},_0x223aa3=(_0x1119ad[_0x217d81(0x144)]||'')[_0x217d81(0x135)]();if(!_0x223aa3)return;const _0xc2048=_0x223aa3[_0x217d81(0x146)]('-');if(0x3!==_0xc2048[_0x217d81(0x140)])return;const _0x486908=Number(_0xc2048[0x2]);if(!Number['isFinite'](_0x486908))return;if(_0x486908<0x1||_0x486908>0x1e)return;const _0x5b344c=(_0x1119ad[_0x217d81(0x164)]||'')[_0x217d81(0x135)](),_0x1bfed8=(_0x1119ad[_0x217d81(0x130)]||'')['toString'](),_0x703fac=!!_0x1119ad[_0x217d81(0x148)]||_0x217d81(0x147)===_0x5b344c;_0x217d81(0x124)===_0x1bfed8&&_0x84e6e2['add'](_0x486908),(_0x703fac||'Late'===_0x5b344c)&&_0x4d9b33++;});const _0x17a2a0=Array[_0x18a154(0x154)](_0x84e6e2)[_0x18a154(0x169)]((_0x421df0,_0x44406d)=>_0x421df0-_0x44406d);_0x2a721f[_0x18a154(0x141)]=_0x17a2a0[_0x18a154(0x140)]?_0x17a2a0[_0x18a154(0x123)](',\x20'):'—',_0x1589af[_0x18a154(0x141)]=_0x4d9b33;}catch(_0xa0a444){console[_0x18a154(0x11f)](_0x18a154(0x155),_0xa0a444),_0x36c600[_0x18a154(0x141)]='Error',_0x3cef52[_0x18a154(0x141)]=_0x18a154(0x127),_0x2a721f[_0x18a154(0x141)]='—',_0x1589af[_0x18a154(0x141)]='—';}}function hideStudentDetailsModal(){const _0xdb65a4=_0x410f,_0x4df041=document[_0xdb65a4(0x131)]('studentDetailsModal');_0x4df041[_0xdb65a4(0x13f)]['display']='none',_0x4df041[_0xdb65a4(0x161)](_0xdb65a4(0x143),_0xdb65a4(0x134));}async function checkAttendanceSubmittedForClassDate(_0x1a0154,_0x4444da){const _0x54ec07=_0x410f;if(!window['db']||!window[_0x54ec07(0x15e)])throw new Error(_0x54ec07(0x126));const _0x58be6d=window[_0x54ec07(0x15e)](window['db'],_0x54ec07(0x12b));if(window[_0x54ec07(0x158)]&&window[_0x54ec07(0x15b)]&&window[_0x54ec07(0x163)])try{const _0x1f0b93=window[_0x54ec07(0x15b)](_0x58be6d,window[_0x54ec07(0x163)](_0x54ec07(0x13c),'==',_0x1a0154),window[_0x54ec07(0x163)]('date','==',_0x4444da));return!(await window[_0x54ec07(0x158)](_0x1f0b93))[_0x54ec07(0x151)];}catch(_0x2bb73d){console[_0x54ec07(0x11f)](_0x54ec07(0x142),_0x2bb73d);}if(window[_0x54ec07(0x158)]){const _0x75f349=await window['getDocs'](_0x58be6d);let _0x360a50=!0x1;return _0x75f349[_0x54ec07(0x12e)](_0x8dca0c=>{const _0x225f48=_0x54ec07,_0x4cddbd=_0x8dca0c['data']?_0x8dca0c['data']():_0x8dca0c[_0x225f48(0x136)];_0x4cddbd&&(_0x4cddbd[_0x225f48(0x13c)]||'')===_0x1a0154&&(_0x4cddbd[_0x225f48(0x144)]||'')===_0x4444da&&(_0x360a50=!0x0);}),_0x360a50;}throw new Error('No\x20Firestore\x20read\x20APIs\x20exposed\x20on\x20window.');}window[_0x4ec116(0x120)](_0x4ec116(0x137),loadStudentData);function _0x1728(){const _0x2edfb6=['studentDetailsContent','\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Name:</strong>\x20','getDocs','Firestore\x20not\x20available.\x20Ensure\x20window.db\x20and\x20window.collection\x20are\x20exposed\x20from\x20your\x20head\x20module\x20script.','771985zrMNhE','query','Present','12efCraY','collection','5661mHniqn','flex','setAttribute','Loading...','where','originalStatus','374553DtDDyv','13897792POrZiu','5578524RtcNXC','No\x20records\x20this\x20month','sort','docs','getMonth','error','addEventListener','name','%\x20(','join','Absent','endISO','Firestore\x20not\x20available.','Failed\x20to\x20fetch\x20attendance.\x20See\x20console\x20for\x20details.','false','lateMarksValue','startISO','attendance_records','studentDetailsModal','round','forEach','display','status','getElementById','padStart','</div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22attendanceNote\x22\x20style=\x22font-size:13px;color:#666;margin-top:8px;\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22attendancePercentRow\x22><strong>Attendance\x20%\x20(this\x20month):</strong>\x20<span\x20id=\x22attendancePercentValue\x22>Loading...</span></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Absent\x20On:</strong>\x20<span\x20id=\x22absentDatesList\x22>Loading...</span></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22lateMarksRow\x22\x20style=\x22margin-top:10px;\x22><strong>Late\x20Marks\x20(this\x20month):</strong>\x20<span\x20id=\x22lateMarksValue\x22>Loading...</span></div>\x0a\x20\x20','true','toString','_document','DOMContentLoaded','❌\x20Error\x20loading\x20student\x20data:','370nMhrYx','absentCount','Firestore\x20read\x20functions\x20(getDocs/query/where)\x20are\x20not\x20exposed\x20on\x20window.\x20Please\x20export\x20them\x20in\x20your\x20head\x20module\x20script.','className','3986490TSLFoi','3726345nlNWbL','style','length','textContent','checkAttendance\x20query\x20failed,\x20falling\x20back:','aria-hidden','date','\x20→\x20','split','Late','isLate','getFullYear','Failed\x20to\x20load\x20studentData.json','804FYcHeg','data','json','push','attendancePercentValue','\x20between\x20','empty','attendanceNote','presentCount','from','Failed\x20to\x20fetch\x20attendance\x20for\x20student:'];_0x1728=function(){return _0x2edfb6;};return _0x1728();}
