const _0x437e2f=_0x5874;(function(_0x2aeeff,_0x2f0939){const _0x2d1f7d=_0x5874,_0x49e304=_0x2aeeff();while(!![]){try{const _0x32c968=parseInt(_0x2d1f7d(0xd0))/0x1*(parseInt(_0x2d1f7d(0x123))/0x2)+parseInt(_0x2d1f7d(0x115))/0x3*(-parseInt(_0x2d1f7d(0x10e))/0x4)+parseInt(_0x2d1f7d(0xef))/0x5+parseInt(_0x2d1f7d(0xd1))/0x6*(parseInt(_0x2d1f7d(0xf3))/0x7)+parseInt(_0x2d1f7d(0xde))/0x8+parseInt(_0x2d1f7d(0x12f))/0x9*(parseInt(_0x2d1f7d(0x12a))/0xa)+-parseInt(_0x2d1f7d(0xfa))/0xb;if(_0x32c968===_0x2f0939)break;else _0x49e304['push'](_0x49e304['shift']());}catch(_0x13bceb){_0x49e304['push'](_0x49e304['shift']());}}}(_0x4df6,0x6a004));function _0x5874(_0x454935,_0x555429){const _0x4df662=_0x4df6();return _0x5874=function(_0x587430,_0x834ec){_0x587430=_0x587430-0xc8;let _0x3ab9c6=_0x4df662[_0x587430];return _0x3ab9c6;},_0x5874(_0x454935,_0x555429);}let studentData={},currentModalStudent=null,currentModalAttendanceData=null;async function loadStudentData(){const _0x14bc8a=_0x5874;try{const _0x412762=await fetch(_0x14bc8a(0xf6));if(!_0x412762['ok'])throw new Error(_0x14bc8a(0x10a));studentData=await _0x412762['json']();}catch(_0x47e161){console[_0x14bc8a(0x129)]('❌\x20Error\x20loading\x20student\x20data:',_0x47e161);}}function currentMonthRangeISO(){const _0x5f3015=_0x5874,_0x12ba22=new Date(),_0x348765=_0x12ba22[_0x5f3015(0xc9)](),_0x29e758=_0x12ba22['getMonth'](),_0x55bbf4=new Date(_0x348765,_0x29e758,0x1),_0x364eb8=new Date(_0x348765,_0x29e758+0x1,0x0),_0x18a220=_0x174a44=>String(_0x174a44)['padStart'](0x2,'0'),_0x470d5e=_0x1d18d1=>_0x1d18d1[_0x5f3015(0xc9)]()+'-'+_0x18a220(_0x1d18d1['getMonth']()+0x1)+'-'+_0x18a220(_0x1d18d1[_0x5f3015(0x105)]());return{'startISO':_0x470d5e(_0x55bbf4),'endISO':_0x470d5e(_0x364eb8)};}function _0x4df6(){const _0x20bb32=['lateMarksValue','Please\x20select\x20a\x20class\x20first.','getDate','totalRecords','April','periodStartISO','getDocs','Failed\x20to\x20load\x20studentData.json','round','flex','Name:\x20','549108EgvxFq','Present','undefined','style','Attendance\x20data\x20not\x20yet\x20available.\x20Please\x20wait\x20until\x20the\x20modal\x20finishes\x20loading.','https://wa.me/?text=','warn','6KLUQFZ','empty','addEventListener','\x20present)','Attendance:\x20','where','_document','attendanceNote','forEach','%\x20(','setAttribute','Class:\x20','splice','toString','40AbgBEE','\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Name:</strong>\x20','className','getElementById','August','attendancePercent','error','100ppkPoT','October','presentCount','absentCount','absentDays','582300ZmbZxM','Firestore\x20query\x20failed\x20—\x20falling\x20back\x20to\x20client-side\x20filter:','Firestore\x20read\x20functions\x20(getDocs/query/where)\x20are\x20not\x20exposed\x20on\x20window.\x20Please\x20export\x20them\x20in\x20your\x20head\x20module\x20script.','getFullYear','isFinite','November','Scholars\x20Academy\x20Attendance\x20Report\x20for\x20','December','true','collection','2887jXOWrE','152424SAFFxk','lateCount','checkAttendance\x20query\x20failed,\x20falling\x20back:','name','Period:\x20','periodEndISO','textContent','No\x20attendance\x20records\x20found\x20for\x20','none','docs','length','date','startISO','3567040dduekl','January','innerHTML','Attendance:\x20No\x20records\x20this\x20month','studentDetailsModal','query','split','Late','aria-hidden','No\x20student\x20is\x20currently\x20loaded\x20to\x20share.\x20Open\x20a\x20student\x20first.','\x20between\x20','fetchAttendanceForStudentThisMonth:\x20className\x20not\x20provided\x20and\x20currentClass\x20is\x20not\x20set.\x20Query\x20will\x20match\x20only\x20by\x20name.','push','data','display','sort','from','1651715hxXyQf','Absent','join','endISO','91tUWuiC','status','absentDatesList','studentData.json','isLate','May','\x20→\x20','12127291INQsPM','open','September','July','attendance_records','Loading...','Absent\x20on:\x20—','studentDetailsContent','Late\x20marks\x20(this\x20month):\x20'];_0x4df6=function(){return _0x20bb32;};return _0x4df6();}async function fetchAttendanceForStudentThisMonth(_0x164408,_0x18fc2f){const _0x4a821e=_0x5874;if(_0x18fc2f=_0x18fc2f||(_0x4a821e(0x110)!=typeof currentClass?currentClass:null),!window['db']||!window[_0x4a821e(0xcf)])throw new Error('Firestore\x20not\x20available.\x20Ensure\x20window.db\x20and\x20window.collection\x20are\x20exposed\x20from\x20your\x20head\x20module\x20script.');if(!_0x164408)throw new Error('studentName\x20is\x20required');_0x18fc2f||console[_0x4a821e(0x114)](_0x4a821e(0xe9));const {startISO:_0x1aca99,endISO:_0xfe7211}=currentMonthRangeISO(),_0x478110=window[_0x4a821e(0xcf)](window['db'],_0x4a821e(0xfe)),_0x2e8aae=_0x43a60c=>'function'==typeof _0x43a60c[_0x4a821e(0xeb)]?_0x43a60c[_0x4a821e(0xeb)]():_0x43a60c[_0x4a821e(0x11b)]||{};if(window['getDocs']&&window[_0x4a821e(0xe3)]&&window[_0x4a821e(0x11a)])try{const _0x19006c=[window['where'](_0x4a821e(0xd4),'==',_0x164408),window[_0x4a821e(0x11a)]('date','>=',_0x1aca99),window[_0x4a821e(0x11a)](_0x4a821e(0xdc),'<=',_0xfe7211)];_0x18fc2f&&_0x19006c[_0x4a821e(0x121)](0x1,0x0,window['where'](_0x4a821e(0x125),'==',_0x18fc2f));const _0x48088b=window[_0x4a821e(0xe3)](_0x478110,..._0x19006c),_0x44b42f=await window[_0x4a821e(0x109)](_0x48088b);let _0x1b95cc=0x0,_0x5c5c32=0x0;const _0x1c473c=[];return _0x44b42f[_0x4a821e(0x11d)](_0x5db77b=>{const _0xe07f6f=_0x4a821e,_0x1f4f1c=_0x2e8aae(_0x5db77b);_0x1c473c[_0xe07f6f(0xea)]({'id':_0x5db77b['id'],'data':_0x1f4f1c});const _0x18778d=(_0x1f4f1c['status']||'')['toString']();'Present'===_0x18778d?_0x1b95cc++:_0xe07f6f(0xf0)===_0x18778d&&_0x5c5c32++;}),{'presentCount':_0x1b95cc,'absentCount':_0x5c5c32,'totalRecords':_0x1b95cc+_0x5c5c32,'docs':_0x1c473c};}catch(_0x9d001b){console['error'](_0x4a821e(0x130),_0x9d001b);}if(window[_0x4a821e(0x109)]){const _0x1ea78a=await window[_0x4a821e(0x109)](_0x478110);let _0x216a09=0x0,_0xbe9cd8=0x0;const _0x40890e=[];return _0x1ea78a[_0x4a821e(0x11d)](_0x4b708b=>{const _0x5e7de1=_0x4a821e,_0x3ba556=_0x2e8aae(_0x4b708b);if(!_0x3ba556)return;const _0x50289b=_0x3ba556[_0x5e7de1(0xdc)]||'',_0x3df6a4=(_0x3ba556['name']||'')['toString'](),_0x5c22ad=(_0x3ba556[_0x5e7de1(0x125)]||'')[_0x5e7de1(0x122)]();if(_0x3df6a4===_0x164408&&(!_0x18fc2f||_0x5c22ad===_0x18fc2f)&&_0x50289b>=_0x1aca99&&_0x50289b<=_0xfe7211){_0x40890e[_0x5e7de1(0xea)]({'id':_0x4b708b['id'],'data':_0x3ba556});const _0x35dfd4=(_0x3ba556['status']||'')[_0x5e7de1(0x122)]();_0x5e7de1(0x10f)===_0x35dfd4?_0x216a09++:'Absent'===_0x35dfd4&&_0xbe9cd8++;}}),{'presentCount':_0x216a09,'absentCount':_0xbe9cd8,'totalRecords':_0x216a09+_0xbe9cd8,'docs':_0x40890e};}throw new Error(_0x4a821e(0xc8));}async function showStudentDetails(_0x3fac4a){const _0x4537d9=_0x5874;if(!currentClass)return void alert(_0x4537d9(0x104));const _0x444ab8=_0x302fed=>{const _0x3d3844=_0x4537d9;if(!_0x302fed)return'';const [_0x5e7292,_0x517277,_0x4aecf7]=_0x302fed[_0x3d3844(0xe4)]('-');return _0x4aecf7+'/'+_0x517277+'/'+_0x5e7292;};document['getElementById'](_0x4537d9(0x101))[_0x4537d9(0xe0)]=_0x4537d9(0x124)+escapeHtml(_0x3fac4a)+'</div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Class:</strong>\x20'+escapeHtml(currentClass)+'</div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22attendanceNote\x22\x20style=\x22font-size:13px;color:#666;margin-top:8px;\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22attendancePercentRow\x22><strong>Attendance\x20%\x20(this\x20month):</strong>\x20<span\x20id=\x22attendancePercentValue\x22>Loading...</span></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Absent\x20On:</strong>\x20<span\x20id=\x22absentDatesList\x22>Loading...</span></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22lateMarksRow\x22\x20style=\x22margin-top:10px;\x22><strong>Late\x20Marks\x20(this\x20month):</strong>\x20<span\x20id=\x22lateMarksValue\x22>Loading...</span></div>\x0a\x20\x20';const _0x4cfe3c=document['getElementById'](_0x4537d9(0xe2));_0x4cfe3c['style'][_0x4537d9(0xec)]=_0x4537d9(0x10c),_0x4cfe3c['setAttribute'](_0x4537d9(0xe6),'false');const _0x251d62=document[_0x4537d9(0x126)]('attendancePercentValue'),_0x83a622=document[_0x4537d9(0x126)](_0x4537d9(0x11c)),_0x3fad79=document[_0x4537d9(0x126)](_0x4537d9(0xf5)),_0x40c013=document[_0x4537d9(0x126)](_0x4537d9(0x103));try{_0x251d62[_0x4537d9(0xd7)]=_0x4537d9(0xff),_0x3fad79['textContent']=_0x4537d9(0xff),_0x40c013[_0x4537d9(0xd7)]=_0x4537d9(0xff);const _0x44d8ad=await fetchAttendanceForStudentThisMonth(_0x3fac4a,currentClass),_0x176a8a=_0x44d8ad[_0x4537d9(0x12c)]||0x0,_0x544106=_0x44d8ad[_0x4537d9(0x12d)]||0x0,_0x15b282=_0x176a8a+_0x544106,_0xeb9b17=currentMonthRangeISO(),_0x957bab=_0x444ab8(_0xeb9b17[_0x4537d9(0xdd)]),_0x49b363=_0x444ab8(_0xeb9b17[_0x4537d9(0xf2)]);if(0x0===_0x15b282)return _0x251d62[_0x4537d9(0xd7)]='No\x20records\x20this\x20month',_0x83a622[_0x4537d9(0xd7)]=_0x4537d9(0xd8)+_0x3fac4a+_0x4537d9(0xe8)+_0x957bab+'\x20and\x20'+_0x49b363+'.',_0x3fad79[_0x4537d9(0xd7)]='—',void(_0x40c013[_0x4537d9(0xd7)]='—');const _0x460928=Math[_0x4537d9(0x10b)](_0x176a8a/_0x15b282*0x64);_0x251d62[_0x4537d9(0xd7)]=_0x460928+'%\x20('+_0x176a8a+'/'+_0x15b282+_0x4537d9(0x118),_0x83a622[_0x4537d9(0xd7)]=_0x4537d9(0xd5)+_0x957bab+_0x4537d9(0xf9)+_0x49b363;const _0x296a2f=new Set();let _0xcd9b65=0x0;(_0x44d8ad[_0x4537d9(0xda)]||[])[_0x4537d9(0x11d)](_0x75ae32=>{const _0x5039e1=_0x4537d9,_0x24a1b1=_0x75ae32[_0x5039e1(0xeb)]||{},_0x2fc9eb=(_0x24a1b1[_0x5039e1(0xdc)]||'')['toString']();if(!_0x2fc9eb)return;const _0x125184=_0x2fc9eb[_0x5039e1(0xe4)]('-');if(0x3!==_0x125184[_0x5039e1(0xdb)])return;const _0x1a6fd8=Number(_0x125184[0x2]);if(!Number[_0x5039e1(0xca)](_0x1a6fd8))return;if(_0x1a6fd8<0x1||_0x1a6fd8>0x1e)return;const _0x206589=(_0x24a1b1['originalStatus']||'')[_0x5039e1(0x122)](),_0x309372=(_0x24a1b1[_0x5039e1(0xf4)]||'')[_0x5039e1(0x122)](),_0xebb786=!!_0x24a1b1[_0x5039e1(0xf7)]||_0x5039e1(0xe5)===_0x206589;'Absent'===_0x309372&&_0x296a2f['add'](_0x1a6fd8),(_0xebb786||_0x5039e1(0xe5)===_0x206589)&&_0xcd9b65++;});const _0x148b5b=Array[_0x4537d9(0xee)](_0x296a2f)[_0x4537d9(0xed)]((_0x19d74e,_0x1eeb17)=>_0x19d74e-_0x1eeb17);_0x3fad79[_0x4537d9(0xd7)]=_0x148b5b[_0x4537d9(0xdb)]?_0x148b5b[_0x4537d9(0xf1)](',\x20'):'—',_0x40c013[_0x4537d9(0xd7)]=_0xcd9b65,currentModalStudent=_0x3fac4a,currentModalAttendanceData={'presentCount':_0x176a8a,'absentCount':_0x544106,'totalRecords':_0x15b282,'attendancePercent':_0x460928,'absentDays':_0x148b5b,'lateCount':_0xcd9b65,'periodStartISO':_0xeb9b17[_0x4537d9(0xdd)],'periodEndISO':_0xeb9b17[_0x4537d9(0xf2)]};}catch(_0x2d0c5e){console[_0x4537d9(0x129)]('Failed\x20to\x20fetch\x20attendance\x20for\x20student:',_0x2d0c5e),_0x251d62[_0x4537d9(0xd7)]='Error',_0x83a622['textContent']='Failed\x20to\x20fetch\x20attendance.\x20See\x20console\x20for\x20details.',_0x3fad79[_0x4537d9(0xd7)]='—',_0x40c013[_0x4537d9(0xd7)]='—';}}function hideStudentDetailsModal(){const _0x4de8fb=_0x5874,_0x4730fd=document[_0x4de8fb(0x126)]('studentDetailsModal');_0x4730fd[_0x4de8fb(0x111)][_0x4de8fb(0xec)]=_0x4de8fb(0xd9),_0x4730fd[_0x4de8fb(0x11f)]('aria-hidden',_0x4de8fb(0xce));}async function checkAttendanceSubmittedForClassDate(_0x5c60a1,_0x168337){const _0x23f4ef=_0x5874;if(!window['db']||!window[_0x23f4ef(0xcf)])throw new Error('Firestore\x20not\x20available.');const _0x5ea45f=window['collection'](window['db'],'attendance_records');if(window[_0x23f4ef(0x109)]&&window[_0x23f4ef(0xe3)]&&window[_0x23f4ef(0x11a)])try{const _0x1b036e=window[_0x23f4ef(0xe3)](_0x5ea45f,window[_0x23f4ef(0x11a)](_0x23f4ef(0x125),'==',_0x5c60a1),window[_0x23f4ef(0x11a)](_0x23f4ef(0xdc),'==',_0x168337));return!(await window['getDocs'](_0x1b036e))[_0x23f4ef(0x116)];}catch(_0x4fa3e1){console[_0x23f4ef(0x129)](_0x23f4ef(0xd3),_0x4fa3e1);}if(window[_0x23f4ef(0x109)]){const _0x576bc6=await window[_0x23f4ef(0x109)](_0x5ea45f);let _0x5e8b4c=!0x1;return _0x576bc6['forEach'](_0x888b24=>{const _0x4e63c1=_0x23f4ef,_0x462e03=_0x888b24['data']?_0x888b24[_0x4e63c1(0xeb)]():_0x888b24[_0x4e63c1(0x11b)];_0x462e03&&(_0x462e03[_0x4e63c1(0x125)]||'')===_0x5c60a1&&(_0x462e03[_0x4e63c1(0xdc)]||'')===_0x168337&&(_0x5e8b4c=!0x0);}),_0x5e8b4c;}throw new Error('No\x20Firestore\x20read\x20APIs\x20exposed\x20on\x20window.');}function shareStudentFromModal(){const _0x3887f1=_0x5874;if(!currentModalStudent)return void alert(_0x3887f1(0xe7));if(!currentModalAttendanceData)return void alert(_0x3887f1(0x112));const _0x4a3377=_0x6caf2=>{const _0x125330=_0x3887f1;if(!_0x6caf2)return'';const [_0x34bda5,_0x12bdb1,_0x540e1c]=_0x6caf2[_0x125330(0xe4)]('-');return _0x540e1c+'/'+_0x12bdb1+'/'+_0x34bda5;},_0x447311=(currentModalAttendanceData['periodStartISO']||currentMonthRangeISO()['startISO'])[_0x3887f1(0xe4)]('-'),_0xc29049=Number(_0x447311[0x1])-0x1,_0x41d172=_0x447311[0x0],_0x558f5d=_0x3887f1(0xcc)+([_0x3887f1(0xdf),'February','March',_0x3887f1(0x107),_0x3887f1(0xf8),'June',_0x3887f1(0xfd),_0x3887f1(0x127),_0x3887f1(0xfc),_0x3887f1(0x12b),_0x3887f1(0xcb),_0x3887f1(0xcd)][_0xc29049]||'')+'\x20'+_0x41d172,_0x2c011c=_0x3887f1(0x10d)+currentModalStudent,_0x1ce970=_0x3887f1(0x120)+escapeHtml(currentClass||''),_0x688eb5=_0x3887f1(0xd5)+_0x4a3377(currentModalAttendanceData[_0x3887f1(0x108)])+_0x3887f1(0xf9)+_0x4a3377(currentModalAttendanceData[_0x3887f1(0xd6)]),_0x108261=currentModalAttendanceData[_0x3887f1(0x106)]>0x0?_0x3887f1(0x119)+currentModalAttendanceData[_0x3887f1(0x128)]+_0x3887f1(0x11e)+currentModalAttendanceData['presentCount']+'/'+currentModalAttendanceData[_0x3887f1(0x106)]+_0x3887f1(0x118):_0x3887f1(0xe1),_0x3a18a8=currentModalAttendanceData['absentDays']&&currentModalAttendanceData[_0x3887f1(0x12e)][_0x3887f1(0xdb)]?'Absent\x20on:\x20'+currentModalAttendanceData[_0x3887f1(0x12e)][_0x3887f1(0xf1)](',\x20'):_0x3887f1(0x100),_0x5be356=_0x3887f1(0x102)+(currentModalAttendanceData[_0x3887f1(0xd2)]||0x0),_0x37de2e=_0x3887f1(0x113)+encodeURIComponent(_0x558f5d+'\x0a\x0a'+_0x2c011c+'\x0a'+_0x1ce970+'\x0a'+_0x688eb5+'\x0a'+_0x108261+'\x0a'+_0x3a18a8+'\x0a'+_0x5be356+'\x0a\x0aIf\x20you\x20have\x20any\x20questions,\x20please\x20contact\x209967772240.');window[_0x3887f1(0xfb)](_0x37de2e,'_blank');}window[_0x437e2f(0x117)]('DOMContentLoaded',loadStudentData);
