const _0x286a35=_0x49bd;(function(_0x37b6e2,_0x5135c7){const _0x475f52=_0x49bd,_0x5816a3=_0x37b6e2();while(!![]){try{const _0x1cc16a=-parseInt(_0x475f52(0x1d1))/0x1+-parseInt(_0x475f52(0x1a7))/0x2+parseInt(_0x475f52(0x209))/0x3*(parseInt(_0x475f52(0x1cc))/0x4)+parseInt(_0x475f52(0x1aa))/0x5+-parseInt(_0x475f52(0x1bd))/0x6*(-parseInt(_0x475f52(0x1c7))/0x7)+-parseInt(_0x475f52(0x1b9))/0x8*(-parseInt(_0x475f52(0x205))/0x9)+-parseInt(_0x475f52(0x1df))/0xa*(parseInt(_0x475f52(0x1c0))/0xb);if(_0x1cc16a===_0x5135c7)break;else _0x5816a3['push'](_0x5816a3['shift']());}catch(_0x3a09c8){_0x5816a3['push'](_0x5816a3['shift']());}}}(_0x1f60,0x678a7));let studentData={},currentModalStudent=null,currentModalAttendanceData=null;async function loadStudentData(){const _0x45588c=_0x49bd;try{const _0x40b7f4=await fetch(_0x45588c(0x1db));if(!_0x40b7f4['ok'])throw new Error(_0x45588c(0x1cd));studentData=await _0x40b7f4[_0x45588c(0x207)]();}catch(_0x3f0cca){console[_0x45588c(0x1fb)](_0x45588c(0x1f5),_0x3f0cca);}}function _0x1f60(){const _0x5e9475=['Absent\x20on:\x20—','data','length','collection','Absent','\x20present)','name','split','Firestore\x20read\x20functions\x20(getDocs/query/where)\x20are\x20not\x20exposed\x20on\x20window.\x20Please\x20export\x20them\x20in\x20your\x20head\x20module\x20script.','absentDatesList','DOMContentLoaded','July','April','❌\x20Error\x20loading\x20student\x20data:','</div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22attendanceNote\x22\x20style=\x22font-size:13px;color:#666;margin-top:8px;\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22attendancePercentRow\x22><strong>Attendance\x20%\x20(this\x20month):</strong>\x20<span\x20id=\x22attendancePercentValue\x22>Loading...</span></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Absent\x20On:</strong>\x20<span\x20id=\x22absentDatesList\x22>Loading...</span></div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22\x20id=\x22lateMarksRow\x22\x20style=\x22margin-top:10px;\x22><strong>Late\x20Marks\x20(this\x20month):</strong>\x20<span\x20id=\x22lateMarksValue\x22>Loading...</span></div>\x0a\x20\x20','getDate','query','_document','%\x20(','error','Scholars\x20Academy\x20Attendance\x20Report\x20for\x20','style','attendance_records','February','March','totalRecords','add','getDocs','status','7588449nwXULD','Failed\x20to\x20fetch\x20attendance\x20for\x20student:','json','January','1065138LnCFxE','Late','\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Name:</strong>\x20','\x20→\x20','display','654250fmtQwS','presentCount','absentDays','218315KomQXA','absentCount','Error','from','Failed\x20to\x20fetch\x20attendance.\x20See\x20console\x20for\x20details.','Firestore\x20not\x20available.\x20Ensure\x20window.db\x20and\x20window.collection\x20are\x20exposed\x20from\x20your\x20head\x20module\x20script.','push','Late\x20marks\x20(this\x20month):\x20','endISO','\x20and\x20','forEach','Class:\x20','August','No\x20Firestore\x20read\x20APIs\x20exposed\x20on\x20window.','Firestore\x20not\x20available.','8YmggFo','className','setAttribute','https://wa.me/?text=','8706skCoPZ','Loading...','</div>\x0a\x20\x20\x20\x20<div\x20class=\x22row\x22><strong>Class:</strong>\x20','11KXjTjG','\x0a\x0aIf\x20you\x20have\x20any\x20questions,\x20please\x20contact\x209967772240.','flex','getElementById','sort','textContent','Name:\x20','2555rAfVUz','getFullYear','toString','checkAttendance\x20query\x20failed,\x20falling\x20back:','true','8IWfwmC','Failed\x20to\x20load\x20studentData.json','No\x20records\x20this\x20month','padStart','open','543158VZwYWb','attendancePercentValue','Attendance:\x20No\x20records\x20this\x20month','October','_blank','join','aria-hidden','studentDetailsContent','isLate','Please\x20select\x20a\x20class\x20first.','studentData.json','Present','Firestore\x20query\x20failed\x20—\x20falling\x20back\x20to\x20client-side\x20filter:','date','8321450iwViwB','false','studentDetailsModal','startISO','lateCount','where','originalStatus','getMonth','periodStartISO'];_0x1f60=function(){return _0x5e9475;};return _0x1f60();}function currentMonthRangeISO(){const _0x53fdc8=_0x49bd,_0x1e93b6=new Date(),_0x4587ca=_0x1e93b6['getFullYear'](),_0x2d2c90=_0x1e93b6[_0x53fdc8(0x1e6)](),_0x26c4fc=new Date(_0x4587ca,_0x2d2c90,0x1),_0x7ffa92=new Date(_0x4587ca,_0x2d2c90+0x1,0x0),_0x20ba2c=_0x4073a7=>String(_0x4073a7)[_0x53fdc8(0x1cf)](0x2,'0'),_0x494eeb=_0x8ff2e9=>_0x8ff2e9[_0x53fdc8(0x1c8)]()+'-'+_0x20ba2c(_0x8ff2e9[_0x53fdc8(0x1e6)]()+0x1)+'-'+_0x20ba2c(_0x8ff2e9[_0x53fdc8(0x1f7)]());return{'startISO':_0x494eeb(_0x26c4fc),'endISO':_0x494eeb(_0x7ffa92)};}async function fetchAttendanceForStudentThisMonth(_0x339ae1){const _0x30113d=_0x49bd;if(!window['db']||!window[_0x30113d(0x1eb)])throw new Error(_0x30113d(0x1af));const {startISO:_0x134f3a,endISO:_0x4b574c}=currentMonthRangeISO(),_0x39a150=window['collection'](window['db'],_0x30113d(0x1fe));if(window[_0x30113d(0x203)]&&window[_0x30113d(0x1f8)]&&window[_0x30113d(0x1e4)])try{const _0x5214bd=window['query'](_0x39a150,window[_0x30113d(0x1e4)](_0x30113d(0x1ee),'==',_0x339ae1),window['where'](_0x30113d(0x1de),'>=',_0x134f3a),window[_0x30113d(0x1e4)](_0x30113d(0x1de),'<=',_0x4b574c)),_0x46517a=await window[_0x30113d(0x203)](_0x5214bd);let _0x495e13=0x0,_0x2f3689=0x0;const _0x1c13cd=[];return _0x46517a[_0x30113d(0x1b4)](_0x1c4a28=>{const _0xbee1d=_0x30113d,_0x50eaa9=_0x1c4a28[_0xbee1d(0x1e9)]?_0x1c4a28['data']():_0x1c4a28[_0xbee1d(0x1f9)];_0x1c13cd[_0xbee1d(0x1b0)]({'id':_0x1c4a28['id'],'data':_0x50eaa9});const _0x999cf9=(_0x50eaa9[_0xbee1d(0x204)]||'')[_0xbee1d(0x1c9)]();_0xbee1d(0x1dc)===_0x999cf9?_0x495e13++:_0xbee1d(0x1ec)===_0x999cf9&&_0x2f3689++;}),{'presentCount':_0x495e13,'absentCount':_0x2f3689,'totalRecords':_0x495e13+_0x2f3689,'docs':_0x1c13cd};}catch(_0x123d11){console[_0x30113d(0x1fb)](_0x30113d(0x1dd),_0x123d11);}if(window[_0x30113d(0x203)]){const _0x20db47=await window[_0x30113d(0x203)](_0x39a150);let _0x161007=0x0,_0x22f144=0x0;const _0x4171b2=[];return _0x20db47[_0x30113d(0x1b4)](_0x34dba2=>{const _0x25527c=_0x30113d,_0x5e6743=_0x34dba2[_0x25527c(0x1e9)]?_0x34dba2[_0x25527c(0x1e9)]():_0x34dba2['_document'],_0x43709b=_0x5e6743[_0x25527c(0x1de)]||'';if((_0x5e6743[_0x25527c(0x1ee)]||'')[_0x25527c(0x1c9)]()===_0x339ae1&&_0x43709b>=_0x134f3a&&_0x43709b<=_0x4b574c){_0x4171b2[_0x25527c(0x1b0)]({'id':_0x34dba2['id'],'data':_0x5e6743});const _0x5cf551=(_0x5e6743['status']||'')[_0x25527c(0x1c9)]();_0x25527c(0x1dc)===_0x5cf551?_0x161007++:_0x25527c(0x1ec)===_0x5cf551&&_0x22f144++;}}),{'presentCount':_0x161007,'absentCount':_0x22f144,'totalRecords':_0x161007+_0x22f144,'docs':_0x4171b2};}throw new Error(_0x30113d(0x1f0));}function _0x49bd(_0x5509b9,_0x3969ca){const _0x1f601a=_0x1f60();return _0x49bd=function(_0x49bd1b,_0x2ede17){_0x49bd1b=_0x49bd1b-0x1a3;let _0x2de7f9=_0x1f601a[_0x49bd1b];return _0x2de7f9;},_0x49bd(_0x5509b9,_0x3969ca);}async function showStudentDetails(_0x439dc5){const _0x4a0549=_0x49bd;if(!currentClass)return void alert(_0x4a0549(0x1da));const _0x3a090a=_0x3c8ab1=>{if(!_0x3c8ab1)return'';const [_0x3805cc,_0x53185f,_0x24ab75]=_0x3c8ab1['split']('-');return _0x24ab75+'/'+_0x53185f+'/'+_0x3805cc;};document['getElementById'](_0x4a0549(0x1d8))['innerHTML']=_0x4a0549(0x1a4)+escapeHtml(_0x439dc5)+_0x4a0549(0x1bf)+escapeHtml(currentClass)+_0x4a0549(0x1f6);const _0x59c8d1=document[_0x4a0549(0x1c3)](_0x4a0549(0x1e1));_0x59c8d1[_0x4a0549(0x1fd)]['display']=_0x4a0549(0x1c2),_0x59c8d1['setAttribute'](_0x4a0549(0x1d7),_0x4a0549(0x1e0));const _0x4bcc20=document[_0x4a0549(0x1c3)](_0x4a0549(0x1d2)),_0x320ff7=document[_0x4a0549(0x1c3)]('attendanceNote'),_0x21c8c8=document[_0x4a0549(0x1c3)](_0x4a0549(0x1f1)),_0x3cd321=document[_0x4a0549(0x1c3)]('lateMarksValue');try{_0x4bcc20[_0x4a0549(0x1c5)]='Loading...',_0x21c8c8[_0x4a0549(0x1c5)]=_0x4a0549(0x1be),_0x3cd321[_0x4a0549(0x1c5)]=_0x4a0549(0x1be);const _0x49de8c=await fetchAttendanceForStudentThisMonth(_0x439dc5),_0x5f2eb6=_0x49de8c[_0x4a0549(0x1a8)]||0x0,_0x9607f7=_0x49de8c[_0x4a0549(0x1ab)]||0x0,_0x378acd=_0x5f2eb6+_0x9607f7,_0x34695d=currentMonthRangeISO(),_0x3265a3=_0x3a090a(_0x34695d['startISO']),_0x3e74c3=_0x3a090a(_0x34695d[_0x4a0549(0x1b2)]);if(0x0===_0x378acd)return _0x4bcc20[_0x4a0549(0x1c5)]=_0x4a0549(0x1ce),_0x320ff7[_0x4a0549(0x1c5)]='No\x20attendance\x20records\x20found\x20for\x20'+_0x439dc5+'\x20between\x20'+_0x3265a3+_0x4a0549(0x1b3)+_0x3e74c3+'.',_0x21c8c8[_0x4a0549(0x1c5)]='—',void(_0x3cd321[_0x4a0549(0x1c5)]='—');const _0x30fa53=Math['round'](_0x5f2eb6/_0x378acd*0x64);_0x4bcc20[_0x4a0549(0x1c5)]=_0x30fa53+_0x4a0549(0x1fa)+_0x5f2eb6+'/'+_0x378acd+_0x4a0549(0x1ed),_0x320ff7[_0x4a0549(0x1c5)]='Period:\x20'+_0x3265a3+_0x4a0549(0x1a5)+_0x3e74c3;const _0x25b39a=new Set();let _0x582b84=0x0;(_0x49de8c['docs']||[])['forEach'](_0xfcf5ca=>{const _0x68b5dd=_0x4a0549,_0x1b8346=_0xfcf5ca['data']||{},_0x3d471f=(_0x1b8346[_0x68b5dd(0x1de)]||'')[_0x68b5dd(0x1c9)]();if(!_0x3d471f)return;const _0x15a06c=_0x3d471f['split']('-');if(0x3!==_0x15a06c[_0x68b5dd(0x1ea)])return;const _0x4cc626=Number(_0x15a06c[0x2]);if(!Number['isFinite'](_0x4cc626))return;if(_0x4cc626<0x1||_0x4cc626>0x1e)return;const _0x49e2cb=(_0x1b8346[_0x68b5dd(0x1e5)]||'')['toString'](),_0x33c608=(_0x1b8346['status']||'')['toString'](),_0x3519ca=!!_0x1b8346[_0x68b5dd(0x1d9)]||_0x68b5dd(0x1a3)===_0x49e2cb;_0x68b5dd(0x1ec)===_0x33c608&&_0x25b39a[_0x68b5dd(0x202)](_0x4cc626),(_0x3519ca||_0x68b5dd(0x1a3)===_0x49e2cb)&&_0x582b84++;});const _0xc3d107=Array[_0x4a0549(0x1ad)](_0x25b39a)[_0x4a0549(0x1c4)]((_0x4b9d44,_0xb5aebf)=>_0x4b9d44-_0xb5aebf);_0x21c8c8[_0x4a0549(0x1c5)]=_0xc3d107['length']?_0xc3d107[_0x4a0549(0x1d6)](',\x20'):'—',_0x3cd321[_0x4a0549(0x1c5)]=_0x582b84,currentModalStudent=_0x439dc5,currentModalAttendanceData={'presentCount':_0x5f2eb6,'absentCount':_0x9607f7,'totalRecords':_0x378acd,'attendancePercent':_0x30fa53,'absentDays':_0xc3d107,'lateCount':_0x582b84,'periodStartISO':_0x34695d[_0x4a0549(0x1e2)],'periodEndISO':_0x34695d[_0x4a0549(0x1b2)]};}catch(_0x6d789e){console[_0x4a0549(0x1fb)](_0x4a0549(0x206),_0x6d789e),_0x4bcc20[_0x4a0549(0x1c5)]=_0x4a0549(0x1ac),_0x320ff7[_0x4a0549(0x1c5)]=_0x4a0549(0x1ae),_0x21c8c8['textContent']='—',_0x3cd321['textContent']='—';}}function hideStudentDetailsModal(){const _0x5b4f81=_0x49bd,_0x32826a=document[_0x5b4f81(0x1c3)](_0x5b4f81(0x1e1));_0x32826a[_0x5b4f81(0x1fd)][_0x5b4f81(0x1a6)]='none',_0x32826a[_0x5b4f81(0x1bb)](_0x5b4f81(0x1d7),_0x5b4f81(0x1cb));}async function checkAttendanceSubmittedForClassDate(_0x4015db,_0x3509f5){const _0x173c40=_0x49bd;if(!window['db']||!window[_0x173c40(0x1eb)])throw new Error(_0x173c40(0x1b8));const _0x159029=window[_0x173c40(0x1eb)](window['db'],_0x173c40(0x1fe));if(window[_0x173c40(0x203)]&&window[_0x173c40(0x1f8)]&&window[_0x173c40(0x1e4)])try{const _0xa0e44b=window[_0x173c40(0x1f8)](_0x159029,window[_0x173c40(0x1e4)]('className','==',_0x4015db),window[_0x173c40(0x1e4)]('date','==',_0x3509f5));return!(await window[_0x173c40(0x203)](_0xa0e44b))['empty'];}catch(_0x1fab3b){console[_0x173c40(0x1fb)](_0x173c40(0x1ca),_0x1fab3b);}if(window['getDocs']){const _0x308b8d=await window['getDocs'](_0x159029);let _0x3cc2f1=!0x1;return _0x308b8d['forEach'](_0x3241a6=>{const _0x3c01c3=_0x173c40,_0x57812f=_0x3241a6[_0x3c01c3(0x1e9)]?_0x3241a6[_0x3c01c3(0x1e9)]():_0x3241a6[_0x3c01c3(0x1f9)];_0x57812f&&(_0x57812f[_0x3c01c3(0x1ba)]||'')===_0x4015db&&(_0x57812f[_0x3c01c3(0x1de)]||'')===_0x3509f5&&(_0x3cc2f1=!0x0);}),_0x3cc2f1;}throw new Error(_0x173c40(0x1b7));}function shareStudentFromModal(){const _0x720ac7=_0x49bd;if(!currentModalStudent)return void alert('No\x20student\x20is\x20currently\x20loaded\x20to\x20share.\x20Open\x20a\x20student\x20first.');if(!currentModalAttendanceData)return void alert('Attendance\x20data\x20not\x20yet\x20available.\x20Please\x20wait\x20until\x20the\x20modal\x20finishes\x20loading.');const _0x26b857=_0x47fe97=>{const _0x33e779=_0x49bd;if(!_0x47fe97)return'';const [_0x565440,_0x4506be,_0xeb8ef7]=_0x47fe97[_0x33e779(0x1ef)]('-');return _0xeb8ef7+'/'+_0x4506be+'/'+_0x565440;},_0x2ac4d2=(currentModalAttendanceData[_0x720ac7(0x1e7)]||currentMonthRangeISO()[_0x720ac7(0x1e2)])[_0x720ac7(0x1ef)]('-'),_0xa8d81e=Number(_0x2ac4d2[0x1])-0x1,_0x55a2c2=_0x2ac4d2[0x0],_0xc6ccaf=_0x720ac7(0x1fc)+([_0x720ac7(0x208),_0x720ac7(0x1ff),_0x720ac7(0x200),_0x720ac7(0x1f4),'May','June',_0x720ac7(0x1f3),_0x720ac7(0x1b6),'September',_0x720ac7(0x1d4),'November','December'][_0xa8d81e]||'')+'\x20'+_0x55a2c2,_0x5cb598=_0x720ac7(0x1c6)+currentModalStudent,_0x4d3b13=_0x720ac7(0x1b5)+escapeHtml(currentClass||''),_0x148ad4='Period:\x20'+_0x26b857(currentModalAttendanceData[_0x720ac7(0x1e7)])+_0x720ac7(0x1a5)+_0x26b857(currentModalAttendanceData['periodEndISO']),_0x2e9b66=currentModalAttendanceData[_0x720ac7(0x201)]>0x0?'Attendance:\x20'+currentModalAttendanceData['attendancePercent']+'%\x20('+currentModalAttendanceData[_0x720ac7(0x1a8)]+'/'+currentModalAttendanceData[_0x720ac7(0x201)]+_0x720ac7(0x1ed):_0x720ac7(0x1d3),_0x5a1589=currentModalAttendanceData[_0x720ac7(0x1a9)]&&currentModalAttendanceData[_0x720ac7(0x1a9)][_0x720ac7(0x1ea)]?'Absent\x20on:\x20'+currentModalAttendanceData[_0x720ac7(0x1a9)][_0x720ac7(0x1d6)](',\x20'):_0x720ac7(0x1e8),_0x4ed17b=_0x720ac7(0x1b1)+(currentModalAttendanceData[_0x720ac7(0x1e3)]||0x0),_0x234018=_0x720ac7(0x1bc)+encodeURIComponent(_0xc6ccaf+'\x0a\x0a'+_0x5cb598+'\x0a'+_0x4d3b13+'\x0a'+_0x148ad4+'\x0a'+_0x2e9b66+'\x0a'+_0x5a1589+'\x0a'+_0x4ed17b+_0x720ac7(0x1c1));window[_0x720ac7(0x1d0)](_0x234018,_0x720ac7(0x1d5));}window['addEventListener'](_0x286a35(0x1f2),loadStudentData);
