const _0x22a019=_0x186c;(function(_0x54fc1e,_0x172a82){const _0x3d86c0=_0x186c,_0x3a6692=_0x54fc1e();while(!![]){try{const _0xf228d7=-parseInt(_0x3d86c0(0x1f0))/0x1*(parseInt(_0x3d86c0(0x24d))/0x2)+parseInt(_0x3d86c0(0x266))/0x3+parseInt(_0x3d86c0(0x21c))/0x4+-parseInt(_0x3d86c0(0x26c))/0x5*(parseInt(_0x3d86c0(0x298))/0x6)+-parseInt(_0x3d86c0(0x1e4))/0x7+-parseInt(_0x3d86c0(0x252))/0x8*(parseInt(_0x3d86c0(0x1e5))/0x9)+parseInt(_0x3d86c0(0x23d))/0xa;if(_0xf228d7===_0x172a82)break;else _0x3a6692['push'](_0x3a6692['shift']());}catch(_0x61fc84){_0x3a6692['push'](_0x3a6692['shift']());}}}(_0x1fce,0x51c30));function _0x186c(_0x36534f,_0x52a415){_0x36534f=_0x36534f-0x1dc;const _0x1fcecb=_0x1fce();let _0x186c14=_0x1fcecb[_0x36534f];return _0x186c14;}function clearResult(){const _0x364501=_0x186c;document[_0x364501(0x284)](_0x364501(0x273))[_0x364501(0x25e)]='';}function clearMarksResult(){const _0x37dff3=_0x186c;document[_0x37dff3(0x284)](_0x37dff3(0x27c))[_0x37dff3(0x25e)]='';}function _0x1fce(){const _0x5e3c6a=['padding','\x27,\x20this)\x22\x20value=\x22','âœ…\x20Present:\x0a','isFinite','<h2\x20style=\x22margin-top:6px;\x20text-align:left;\x22>','...','left','length','\x20-\x20Test\x20Marks\x0a','174pYcKKL','\x20attendance\x20for\x20','Some\x20marks\x20are\x20invalid\x20or\x20exceed\x20Total\x20Marks.\x20First\x20few:\x20','classList','\x20before\x20submitting.\x0aUnmarked\x20(','3767896tRSVmp','\x20has\x20already\x20been\x20submitted.','>Late</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22mark(\x27','\x27,\x20\x27Late\x27,\x20this)\x22\x20','\x27,\x20\x27Present\x27,\x20this)\x22\x20','.student','\x20students)?','setAttribute','-9999px','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20class=\x22time-input\x22\x20type=\x22text\x22\x20placeholder=\x22Late\x20Mark\x20time\x22\x20onchange=\x22onTimeChange(\x27','.marks-input','add','value','innerHTML','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','removeChild','error','createElement','downloadImageBtn','\x20value=\x22','801093PlnPKn','name','contains','late-selected','attendance_records','ðŸ•’\x20Late\x20Comers:\x0a','16330ZFKCGL','active','.time-input','flex','checkAttendanceSubmittedForClassDate\x20error:','No\x20teacher\x20is\x20currently\x20signed\x20in.\x20The\x20submitted\x20records\x20will\x20not\x20have\x20a\x20\x22faculty\x22\x20value.\x20Do\x20you\x20want\x20to\x20continue?\x20(Sign\x20in\x20recommended)','short','summary','\x20â€”\x20','14px','click','image/png','.\x20<strong>','Firebase\x20is\x20not\x20initialized.\x20Check\x20firebaseConfig\x20in\x20head\x20module\x20script.','color','top','marksSummary','Inter,\x20\x27Segoe\x20UI\x27,\x20Roboto,\x20Helvetica,\x20Arial,\x20sans-serif','0\x2010px\x2030px\x20rgba(20,30,60,0.12)','mark','marksStudentsList','toFixed','>Present</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22mark(\x27','removeAttribute','getElementById','\x20students\x20in\x20','\x27,\x20\x27Absent\x27,\x20this)\x22\x20','940px','remove','then','push','\x20Attendance\x0a\x0a','\x20-\x20Enter\x20Test\x20Marks</h2>','download','Highest:\x20','Failed\x20to\x20verify\x20existing\x20attendance:','chapterInput','border','\x27,\x20this)\x22\x20title=\x22Enter\x20arrival\x20time\x20if\x20late\x20(e.g.\x207:20\x20pm)\x22\x20style=\x22','parentNode','background','\x20\x20\x20\x20','sort','No\x20attendance\x20marked\x20for\x20this\x20class.\x20Mark\x20attendance\x20before\x20submitting.','780roHSAA','\x20first.\x0aUnmarked\x20(','maxWidth','Submit\x20attendance\x20for\x20','\x27,\x20this)\x22\x20oninput=\x22onTimeChange(\x27','Error\x20saving\x20attendance:','analytics-btn','display','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20class=\x22marks-input\x22\x20type=\x22number\x22\x20placeholder=\x22Marks\x22\x20min=\x220\x22\x20oninput=\x22onMarksInput(\x27','body','none','1748985VfhFCf','9NdmSUN','student','Subject:\x20','No\x20marks\x20summary\x20to\x20share!','#1f2937','center','margin','display:none;','max','forEach','.\x20<span\x20style=\x22color:#e74c3c;font-weight:600;\x22><strong>','4113MwHnUV','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:14px;margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20<!--\x20Present\x20card\x20(soft\x20green\x20gradient)\x20-->\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex:1;background:linear-gradient(90deg,\x20rgba(236,253,245,1)\x200%,\x20rgba(255,255,255,0)\x20100%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:10px;padding:12px;border:1px\x20solid\x20rgba(16,185,129,0.06);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:0\x206px\x2018px\x20rgba(16,185,129,0.03);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-weight:700;font-size:14px;display:flex;align-items:center;gap:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20âœ…\x20Present\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:13px;line-height:1.45;color:#111827;min-height:60px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Please\x20mark\x20all\x20students\x20for\x20','_blank','collection','filter','type','join','slice','toLocaleDateString','numeric','Failed\x20to\x20create\x20image.\x20See\x20console\x20for\x20details.','\x0aInvalid\x20marks\x0a','\x20-\x20','querySelectorAll','Average:\x20','addEventListener','No\x20attendance\x20marked!','querySelector','invalid','boxSizing','1px\x20solid\x20rgba(22,\x2024,\x2035,\x200.06)','open','textContent','position','\x0a\x20\x20\x20\x20<div\x20style=\x22display:flex;align-items:center;gap:16px;margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:64px;height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:linear-gradient(135deg,#5eead4,#60a5fa);box-shadow:0\x206px\x2018px\x20rgba(59,130,246,0.12);font-size:28px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20ðŸŽ“\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22flex:1;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:20px;font-weight:700;margin-bottom:2px;\x22>Scholars\x20Academy</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:13px;color:#4b5563;\x22>ðŸ“š\x20','Show\x20Full\x20Details','getBoundingClientRect','present-selected','studentsList','Failed\x20to\x20verify\x20if\x20attendance\x20already\x20submitted\x20(see\x20console).\x20Do\x20you\x20still\x20want\x20to\x20submit?','appendChild','info','catch','fixed','scrollTo','class=\x22absent-selected\x22','totalMarksInput','time','class=\x22late-selected\x22','\x22\x20title=\x22Enter\x20marks\x20obtained\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','class=\x22present-selected\x22','Failed\x20to\x20submit\x20attendance.\x20Check\x20console\x20for\x20details.','smooth','62680CFDIQv','DOMContentLoaded','Late','Timestamp','):\x20','button','analyticsStudentsList','</strong>','style','.btn-group\x20button','trim','status','entries','linear-gradient(135deg,\x20#f0f7ff\x200%,\x20#ffffff\x2040%,\x20#f7fafc\x20100%)','Chapter:\x20','Lowest:\x20','map','Absent','\x0aAbsent\x20students\x0a','toString','No\x20valid\x20marks\x20entered\x20yet.\x0a','No\x20attendance\x20to\x20share!','scrollIntoView','focus','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22name\x22>','className','disabled','</strong>\x20â€”\x20','https://wa.me/?text=','Present','boxShadow','scrollY','28px','15554480nPJXtr','<br>','div','absent-selected','fontFamily','----------------------------------\x0a\x0a','Please\x20select\x20a\x20class\x20and\x20mark\x20attendance\x20first.'];_0x1fce=function(){return _0x5e3c6a;};return _0x1fce();}function loadClass(_0x30a669){const _0x2f5806=_0x186c,_0x4f7c1f=currentClass;_0x4f7c1f&&_0x4f7c1f!==_0x30a669&&(attendance[_0x4f7c1f]={},testMarks[_0x4f7c1f]={}),currentClass=_0x30a669;const _0xae80cf=document[_0x2f5806(0x284)]('marksSection')[_0x2f5806(0x250)][_0x2f5806(0x268)](_0x2f5806(0x26d)),_0x1fda36=document[_0x2f5806(0x284)]('analyticsSection')['classList'][_0x2f5806(0x268)]('active');_0xae80cf?loadMarksClass(_0x30a669):_0x1fda36?loadAnalyticsClass(_0x30a669):loadAttendanceClass(_0x30a669);const _0x1514ea=getLocalISODate();checkAttendanceSubmittedForClassDate(_0x30a669,_0x1514ea)[_0x2f5806(0x289)](_0x4ff326=>{setShareAndDownloadVisibility(Boolean(_0x4ff326));})['catch'](_0x5e1ff0=>{const _0x3d533c=_0x2f5806;setShareAndDownloadVisibility(!0x1),console[_0x3d533c(0x262)](_0x3d533c(0x270),_0x5e1ff0);});}function loadAttendanceClass(_0x54c379){const _0x2e6c4c=_0x186c;document[_0x2e6c4c(0x284)](_0x2e6c4c(0x273))[_0x2e6c4c(0x25e)]='',attendance[_0x54c379]||(attendance[_0x54c379]={}),currentClass=_0x54c379;const _0x4109dd=studentData[_0x54c379]||[];_0x4109dd[_0x2e6c4c(0x1ee)](_0x5b2ffa=>{attendance[_0x54c379][_0x5b2ffa]||(attendance[_0x54c379][_0x5b2ffa]={'status':null,'time':''});});const _0x23100a=document[_0x2e6c4c(0x284)](_0x2e6c4c(0x20d));_0x23100a[_0x2e6c4c(0x25f)]='<h2\x20style=\x22margin-top:6px;\x22>'+_0x54c379+'\x20Standard\x20-\x20Mark\x20Attendance</h2>',_0x4109dd[_0x2e6c4c(0x1ee)](_0x34d7c5=>{const _0x2c559e=_0x2e6c4c,_0x15afbc=attendance[_0x54c379][_0x34d7c5]||{'status':null,'time':''},_0x415674=_0x2c559e(0x21e)===_0x15afbc[_0x2c559e(0x227)],_0x149b0c='Present'===_0x15afbc[_0x2c559e(0x227)]?_0x2c559e(0x20c):'',_0x58c2e4=_0x2c559e(0x22d)===_0x15afbc['status']?_0x2c559e(0x240):'',_0x55197f='Late'===_0x15afbc[_0x2c559e(0x227)]?_0x2c559e(0x269):'',_0x3fd895=document[_0x2c559e(0x263)](_0x2c559e(0x23f));_0x3fd895[_0x2c559e(0x235)]=_0x2c559e(0x1e6),_0x3fd895[_0x2c559e(0x25f)]=_0x2c559e(0x234)+escapeHtml(_0x34d7c5)+_0x2c559e(0x25b)+escapeJs(_0x34d7c5)+_0x2c559e(0x1dd)+escapeJs(_0x34d7c5)+_0x2c559e(0x292)+(_0x415674?'':_0x2c559e(0x1ec))+'\x22\x20'+(_0x415674?'':_0x2c559e(0x236))+_0x2c559e(0x265)+escapeHtml(_0x15afbc[_0x2c559e(0x216)]||'')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22btn-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22mark(\x27'+escapeJs(_0x34d7c5)+_0x2c559e(0x255)+(_0x55197f?_0x2c559e(0x217):'')+_0x2c559e(0x254)+escapeJs(_0x34d7c5)+_0x2c559e(0x256)+(_0x149b0c?_0x2c559e(0x219):'')+_0x2c559e(0x282)+escapeJs(_0x34d7c5)+_0x2c559e(0x286)+(_0x58c2e4?_0x2c559e(0x214):'')+'>Absent</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x23100a[_0x2c559e(0x20f)](_0x3fd895);}),setTimeout(()=>{const _0xebc95=_0x2e6c4c,_0x3d3d47=_0x23100a['getBoundingClientRect']()[_0xebc95(0x27b)]+window['scrollY']-0x3c;window['scrollTo']({'top':_0x3d3d47,'behavior':_0xebc95(0x21b)});},0x50);}function loadMarksClass(_0x4c1102){const _0x127a28=_0x186c;document['getElementById'](_0x127a28(0x27c))[_0x127a28(0x25e)]='',testMarks[_0x4c1102]||(testMarks[_0x4c1102]={}),currentClass=_0x4c1102;const _0x1322eb=studentData[_0x4c1102]||[];_0x1322eb['forEach'](_0x3c9a1c=>{void 0x0===testMarks[_0x4c1102][_0x3c9a1c]&&(testMarks[_0x4c1102][_0x3c9a1c]='');});const _0x138f24=document[_0x127a28(0x284)](_0x127a28(0x280));_0x138f24['innerHTML']='<h2\x20style=\x22margin-top:6px;\x20text-align:left;\x22>'+_0x4c1102+_0x127a28(0x28c),_0x1322eb[_0x127a28(0x1ee)](_0x4edd89=>{const _0x16ddbd=_0x127a28,_0x9c652d=testMarks[_0x4c1102][_0x4edd89]||'',_0x21cd2d=document[_0x16ddbd(0x263)](_0x16ddbd(0x23f));_0x21cd2d[_0x16ddbd(0x235)]='student',_0x21cd2d['innerHTML']=_0x16ddbd(0x234)+escapeHtml(_0x4edd89)+_0x16ddbd(0x1e1)+escapeJs(_0x4edd89)+_0x16ddbd(0x245)+escapeHtml(_0x9c652d)+_0x16ddbd(0x218),_0x138f24['appendChild'](_0x21cd2d);}),applyTotalToInputs(),setTimeout(()=>{const _0x5f2c35=_0x127a28,_0xaf1218=_0x138f24[_0x5f2c35(0x20b)]()['top']+window[_0x5f2c35(0x23b)]-0x3c;window[_0x5f2c35(0x213)]({'top':_0xaf1218,'behavior':'smooth'});},0x50);}function loadAnalyticsClass(_0x476e00){const _0x12616e=_0x186c;document[_0x12616e(0x284)](_0x12616e(0x273))[_0x12616e(0x25e)]='',attendance[_0x476e00]||(attendance[_0x476e00]={}),testMarks[_0x476e00]||(testMarks[_0x476e00]={}),currentClass=_0x476e00;const _0xd1aa92=studentData[_0x476e00]||[],_0x1abfe3=document['getElementById'](_0x12616e(0x222));_0x1abfe3[_0x12616e(0x25f)]=_0x12616e(0x248)+escapeHtml(_0x476e00)+'\x20-\x20Students\x20Analytics</h2>',_0xd1aa92['forEach'](_0x4674be=>{const _0x53524e=_0x12616e,_0x382fc8=document[_0x53524e(0x263)](_0x53524e(0x23f));_0x382fc8[_0x53524e(0x235)]=_0x53524e(0x1e6);const _0x41ba46=document['createElement'](_0x53524e(0x23f));_0x41ba46[_0x53524e(0x235)]=_0x53524e(0x267),_0x41ba46[_0x53524e(0x207)]=_0x4674be;const _0x17dcce=document[_0x53524e(0x263)](_0x53524e(0x23f));_0x17dcce[_0x53524e(0x224)]['display']=_0x53524e(0x26f),_0x17dcce[_0x53524e(0x224)]['gap']='8px',_0x17dcce[_0x53524e(0x224)]['alignItems']=_0x53524e(0x1ea);const _0x2dfa30=document[_0x53524e(0x263)](_0x53524e(0x221));_0x2dfa30[_0x53524e(0x235)]=_0x53524e(0x1df),_0x2dfa30[_0x53524e(0x1f6)]='button',_0x2dfa30['textContent']=_0x53524e(0x20a),_0x2dfa30[_0x53524e(0x200)](_0x53524e(0x276),function(){showStudentDetails(_0x4674be);});const _0x344cb9=document[_0x53524e(0x263)](_0x53524e(0x221));_0x344cb9[_0x53524e(0x235)]=_0x53524e(0x1df),_0x344cb9[_0x53524e(0x1f6)]=_0x53524e(0x221),_0x344cb9['textContent']='Test\x20Marks',_0x344cb9['addEventListener'](_0x53524e(0x276),function(){showStudentMarks(_0x4674be);}),_0x17dcce[_0x53524e(0x20f)](_0x2dfa30),_0x17dcce[_0x53524e(0x20f)](_0x344cb9),_0x382fc8['appendChild'](_0x41ba46),_0x382fc8[_0x53524e(0x20f)](_0x17dcce),_0x1abfe3[_0x53524e(0x20f)](_0x382fc8);}),setTimeout(()=>{const _0x4e5390=_0x12616e,_0x41a3a7=_0x1abfe3[_0x4e5390(0x20b)]()['top']+window[_0x4e5390(0x23b)]-0x3c;window['scrollTo']({'top':_0x41a3a7,'behavior':'smooth'});},0x50);}function mark(_0x216c31,_0x4010f0,_0x31c20b){const _0x4c0259=_0x186c;if(!currentClass)return;if(!attendance[currentClass]||!attendance[currentClass][_0x216c31])return;attendance[currentClass][_0x216c31][_0x4c0259(0x227)]=_0x4010f0;const _0xeb9e7e=_0x31c20b['closest'](_0x4c0259(0x257)),_0x4d19dd=_0xeb9e7e[_0x4c0259(0x202)](_0x4c0259(0x26e));_0xeb9e7e[_0x4c0259(0x1fe)](_0x4c0259(0x225))['forEach'](_0x109b8b=>{const _0x4399fc=_0x4c0259;_0x109b8b['classList']['remove'](_0x4399fc(0x20c),_0x4399fc(0x240),_0x4399fc(0x269));}),_0x4c0259(0x239)===_0x4010f0?(_0x31c20b[_0x4c0259(0x250)][_0x4c0259(0x25d)](_0x4c0259(0x20c)),_0x4d19dd&&(_0x4d19dd[_0x4c0259(0x224)][_0x4c0259(0x1e0)]=_0x4c0259(0x1e3),_0x4d19dd[_0x4c0259(0x236)]=!0x0,_0x4d19dd['value']=''),attendance[currentClass][_0x216c31][_0x4c0259(0x216)]=''):_0x4c0259(0x21e)===_0x4010f0?(_0x31c20b[_0x4c0259(0x250)][_0x4c0259(0x25d)]('late-selected'),_0x4d19dd&&(_0x4d19dd[_0x4c0259(0x224)][_0x4c0259(0x1e0)]='',_0x4d19dd['disabled']=!0x1,setTimeout(()=>_0x4d19dd[_0x4c0259(0x233)](),0x3c))):_0x4c0259(0x22d)===_0x4010f0&&(_0x31c20b[_0x4c0259(0x250)][_0x4c0259(0x25d)](_0x4c0259(0x240)),_0x4d19dd&&(_0x4d19dd[_0x4c0259(0x224)][_0x4c0259(0x1e0)]=_0x4c0259(0x1e3),_0x4d19dd[_0x4c0259(0x236)]=!0x0,_0x4d19dd['value']=''),attendance[currentClass][_0x216c31][_0x4c0259(0x216)]='');}function onTimeChange(_0x44702c,_0x1c3caa){const _0x3920b8=_0x186c;if(!currentClass)return;if(!attendance[currentClass]||!attendance[currentClass][_0x44702c])return;const _0x1bb6c2=(_0x1c3caa[_0x3920b8(0x25e)]||'')['trim']();attendance[currentClass][_0x44702c][_0x3920b8(0x216)]=_0x1bb6c2,_0x1bb6c2&&'Late'!==attendance[currentClass][_0x44702c]['status']&&(attendance[currentClass][_0x44702c][_0x3920b8(0x227)]=_0x3920b8(0x21e),loadAttendanceClass(currentClass));}function generateResult(){const _0x2035d9=_0x186c;if(currentClass&&studentData[currentClass]&&studentData[currentClass]['length']>0x0){const _0x55d495=findUnmarkedStudents(currentClass);if(_0x55d495[_0x2035d9(0x24b)]>0x0){const _0x458531=_0x55d495[_0x2035d9(0x1f8)](0x0,0xf)[_0x2035d9(0x1f7)](',\x20');return void alert(_0x2035d9(0x1f2)+currentClass+'\x20first.\x0aUnmarked\x20('+_0x55d495[_0x2035d9(0x24b)]+_0x2035d9(0x220)+_0x458531+(_0x55d495[_0x2035d9(0x24b)]>0xf?'...':''));}}else for(let _0xdcffa8 in attendance){if(!studentData[_0xdcffa8]||0x0===studentData[_0xdcffa8][_0x2035d9(0x24b)])continue;const _0x48a4dc=findUnmarkedStudents(_0xdcffa8);if(_0x48a4dc[_0x2035d9(0x24b)]>0x0){const _0x108602=_0x48a4dc[_0x2035d9(0x1f8)](0x0,0xf)[_0x2035d9(0x1f7)](',\x20');return void alert(_0x2035d9(0x1f2)+_0xdcffa8+_0x2035d9(0x299)+_0x48a4dc[_0x2035d9(0x24b)]+_0x2035d9(0x220)+_0x108602+(_0x48a4dc['length']>0xf?_0x2035d9(0x249):''));}}let _0x219ae1='';for(let _0xcfb5cd in attendance){const _0x2b0b20=Object[_0x2035d9(0x228)](attendance[_0xcfb5cd]||{}),_0x1f89aa=_0x2b0b20[_0x2035d9(0x1f5)](([_0x37c5b0,_0x5db3d3])=>_0x5db3d3&&('Present'===_0x5db3d3[_0x2035d9(0x227)]||_0x2035d9(0x21e)===_0x5db3d3[_0x2035d9(0x227)]))[_0x2035d9(0x22c)](([_0x2975f0])=>_0x2975f0),_0x19d636=_0x2b0b20[_0x2035d9(0x1f5)](([_0x353292,_0x214786])=>_0x214786&&'Late'===_0x214786[_0x2035d9(0x227)])[_0x2035d9(0x22c)](([_0x1cf754,_0x1a47ae])=>({'name':_0x1cf754,'time':_0x1a47ae['time']}));0x0===_0x1f89aa[_0x2035d9(0x24b)]&&0x0===_0x19d636[_0x2035d9(0x24b)]||(_0x219ae1+='ðŸ“š\x20'+_0xcfb5cd+_0x2035d9(0x28b),_0x1f89aa['length']>0x0&&(_0x219ae1+=_0x2035d9(0x246),_0x1f89aa['forEach']((_0x4ad9fd,_0xaf7168)=>{const _0x1ed0ea=_0x2035d9;_0x219ae1+=_0x1ed0ea(0x295)+_0x4ad9fd+'\x0a';}),_0x219ae1+='\x0a'),_0x19d636[_0x2035d9(0x24b)]>0x0&&(_0x219ae1+=_0x2035d9(0x26b),_0x19d636[_0x2035d9(0x1ee)](_0x5057bc=>{const _0x214ba3=_0x2035d9;_0x219ae1+='\x20\x20\x20-\x20'+_0x5057bc[_0x214ba3(0x267)]+_0x214ba3(0x1fd)+(_0x5057bc['time']||'-')+'\x0a';}),_0x219ae1+='\x0a'),_0x219ae1+=_0x2035d9(0x242));}document['getElementById'](_0x2035d9(0x273))[_0x2035d9(0x25e)]=_0x219ae1['trim']()||_0x2035d9(0x201),setTimeout(()=>{const _0x400da7=_0x2035d9,_0x5eb3cb=document[_0x400da7(0x284)](_0x400da7(0x273));_0x5eb3cb&&_0x5eb3cb[_0x400da7(0x232)]({'behavior':'smooth','block':_0x400da7(0x1ea)});},0x3c);}function shareOnWhatsApp(){const _0x47c4d1=_0x186c,_0x4d694f=document[_0x47c4d1(0x284)]('summary')[_0x47c4d1(0x25e)];if(!_0x4d694f[_0x47c4d1(0x226)]())return void alert(_0x47c4d1(0x231));const _0x22f4d2=_0x47c4d1(0x238)+encodeURIComponent(_0x4d694f);window[_0x47c4d1(0x206)](_0x22f4d2,_0x47c4d1(0x1f3));}function onMarksInput(_0x364da0,_0x32062a){const _0x4cf8d2=_0x186c;if(!currentClass)return;testMarks[currentClass]||(testMarks[currentClass]={});const _0x1107c7=(_0x32062a['value']||'')[_0x4cf8d2(0x22f)]()['trim']();testMarks[currentClass][_0x364da0]=_0x1107c7;const _0x5556c6=Number(document[_0x4cf8d2(0x284)](_0x4cf8d2(0x215))[_0x4cf8d2(0x25e)]||'');if(!isNaN(_0x5556c6)&&_0x5556c6>0x0){if(''===_0x1107c7)_0x32062a[_0x4cf8d2(0x250)][_0x4cf8d2(0x288)](_0x4cf8d2(0x203));else{const _0x5e279b=Number(_0x1107c7);isNaN(_0x5e279b)||_0x5e279b<0x0||_0x5e279b>_0x5556c6?_0x32062a[_0x4cf8d2(0x250)][_0x4cf8d2(0x25d)](_0x4cf8d2(0x203)):_0x32062a[_0x4cf8d2(0x250)][_0x4cf8d2(0x288)](_0x4cf8d2(0x203));}}else _0x32062a[_0x4cf8d2(0x250)]['remove'](_0x4cf8d2(0x203));}function onTotalMarksChange(){const _0x57a3db=_0x186c;applyTotalToInputs();const _0x3be495=Number(document[_0x57a3db(0x284)](_0x57a3db(0x215))[_0x57a3db(0x25e)]||'');if(!currentClass||!testMarks[currentClass])return;document['getElementById'](_0x57a3db(0x280))['querySelectorAll'](_0x57a3db(0x25c))['forEach'](_0x1e8d1e=>{const _0x3b23fa=_0x57a3db,_0x56e28b=_0x1e8d1e[_0x3b23fa(0x25e)];if(''===_0x56e28b)return void _0x1e8d1e['classList'][_0x3b23fa(0x288)](_0x3b23fa(0x203));const _0x4408e8=Number(_0x56e28b);isNaN(_0x4408e8)||_0x4408e8<0x0||_0x3be495&&_0x4408e8>_0x3be495?_0x1e8d1e[_0x3b23fa(0x250)]['add'](_0x3b23fa(0x203)):_0x1e8d1e[_0x3b23fa(0x250)][_0x3b23fa(0x288)](_0x3b23fa(0x203));});}function applyTotalToInputs(){const _0x1769ca=_0x186c,_0x58fd95=document[_0x1769ca(0x284)]('totalMarksInput')['value'],_0x2057c3=document['getElementById'](_0x1769ca(0x280));if(!_0x2057c3)return;_0x2057c3[_0x1769ca(0x1fe)]('.marks-input')[_0x1769ca(0x1ee)](_0x2e5ef2=>{const _0x9448e0=_0x1769ca;_0x58fd95&&''!==_0x58fd95?_0x2e5ef2[_0x9448e0(0x259)](_0x9448e0(0x1ed),_0x58fd95):_0x2e5ef2[_0x9448e0(0x283)](_0x9448e0(0x1ed));});}function generateMarksResult(){const _0x152c2b=_0x186c;if(!currentClass)return void alert('Please\x20select\x20a\x20class\x20first.');const _0x5aea63=(document[_0x152c2b(0x284)]('subjectInput')[_0x152c2b(0x25e)]||'')[_0x152c2b(0x226)](),_0x1f48a6=(document[_0x152c2b(0x284)](_0x152c2b(0x290))['value']||'')['trim'](),_0x1b2d81=document[_0x152c2b(0x284)](_0x152c2b(0x215))[_0x152c2b(0x25e)]||'',_0x5060e0=''===_0x1b2d81?null:Number(_0x1b2d81),_0x27559c=studentData[currentClass]||[];testMarks[currentClass]||(testMarks[currentClass]={});const _0x141fb5=[],_0x8afc63=[];if(_0x27559c[_0x152c2b(0x1ee)](_0x5da057=>{const _0x91cef7=_0x152c2b,_0x40046a=(testMarks[currentClass][_0x5da057]||'')[_0x91cef7(0x22f)]()[_0x91cef7(0x226)]();if(''===_0x40046a)_0x8afc63[_0x91cef7(0x28a)]({'name':_0x5da057,'mark':null});else{const _0x47a13e=Number(_0x40046a);isNaN(_0x47a13e)||_0x47a13e<0x0||null!==_0x5060e0&&_0x47a13e>_0x5060e0?(_0x141fb5[_0x91cef7(0x28a)](_0x5da057),_0x8afc63[_0x91cef7(0x28a)]({'name':_0x5da057,'mark':_0x40046a,'invalid':!0x0})):_0x8afc63[_0x91cef7(0x28a)]({'name':_0x5da057,'mark':_0x47a13e});}}),_0x141fb5[_0x152c2b(0x24b)]>0x0){const _0x3c88de=_0x141fb5[_0x152c2b(0x1f8)](0x0,0x5)[_0x152c2b(0x1f7)](',\x20');alert(_0x152c2b(0x24f)+_0x3c88de+(_0x141fb5[_0x152c2b(0x24b)]>0x5?_0x152c2b(0x249):''));}let _0x51dc49='';_0x51dc49+='ðŸ“\x20'+currentClass+_0x152c2b(0x24c),_0x5aea63&&(_0x51dc49+=_0x152c2b(0x1e7)+_0x5aea63+'\x0a'),_0x1f48a6&&(_0x51dc49+=_0x152c2b(0x22a)+_0x1f48a6+'\x0a'),null!==_0x5060e0&&(_0x51dc49+='Total\x20Marks:\x20'+_0x5060e0+'\x0a'),_0x51dc49+='\x0a';const _0x182da2=_0x8afc63[_0x152c2b(0x1f5)](_0x4185c4=>null!==_0x4185c4[_0x152c2b(0x27f)]&&!_0x4185c4[_0x152c2b(0x203)])['slice']()[_0x152c2b(0x296)]((_0x3ce71b,_0x5efbd7)=>Number(_0x5efbd7[_0x152c2b(0x27f)])-Number(_0x3ce71b[_0x152c2b(0x27f)])),_0x442b1d=_0x8afc63[_0x152c2b(0x1f5)](_0x2c87ec=>null===_0x2c87ec[_0x152c2b(0x27f)])[_0x152c2b(0x22c)](_0xca450c=>_0xca450c['name']),_0x446a16=_0x8afc63[_0x152c2b(0x1f5)](_0x54835d=>_0x54835d[_0x152c2b(0x203)]);if(_0x182da2[_0x152c2b(0x24b)]>0x0){_0x182da2[_0x152c2b(0x1ee)]((_0x34ac4e,_0x5162ae)=>{const _0x515900=_0x152c2b;_0x51dc49+=_0x5162ae+0x1+'.\x20'+_0x34ac4e[_0x515900(0x267)]+':\x20'+_0x34ac4e['mark']+'\x0a';});let _0x1d7782=0x0,_0x464d24=0x0,_0x3c8fb1=-0x1/0x0,_0x134097=[],_0x8e0213=0x1/0x0,_0x586233=[];_0x182da2[_0x152c2b(0x1ee)](_0x53d765=>{const _0x117f12=_0x152c2b,_0x5c6e2b=Number(_0x53d765['mark']);_0x1d7782+=_0x5c6e2b,_0x464d24++,_0x5c6e2b>_0x3c8fb1?(_0x3c8fb1=_0x5c6e2b,_0x134097=[_0x53d765['name']]):_0x5c6e2b===_0x3c8fb1&&_0x134097['push'](_0x53d765['name']),_0x5c6e2b<_0x8e0213?(_0x8e0213=_0x5c6e2b,_0x586233=[_0x53d765[_0x117f12(0x267)]]):_0x5c6e2b===_0x8e0213&&_0x586233[_0x117f12(0x28a)](_0x53d765[_0x117f12(0x267)]);}),_0x51dc49+='\x0a',_0x134097['length']>0x0&&(_0x51dc49+=_0x152c2b(0x28e)+_0x134097[_0x152c2b(0x1f7)](',\x20')+_0x152c2b(0x274)+_0x3c8fb1+'\x0a'),_0x586233['length']>0x0&&_0x8e0213!==0x1/0x0&&(_0x51dc49+=_0x152c2b(0x22b)+_0x586233[_0x152c2b(0x1f7)](',\x20')+_0x152c2b(0x274)+_0x8e0213+'\x0a');const _0x3aa06a=_0x1d7782/_0x464d24;_0x51dc49+=_0x152c2b(0x1ff)+(Number[_0x152c2b(0x247)](_0x3aa06a)?_0x3aa06a[_0x152c2b(0x281)](0x2):'-')+'\x0a';}else _0x51dc49+=_0x152c2b(0x230);_0x442b1d[_0x152c2b(0x24b)]>0x0&&(_0x51dc49+=_0x152c2b(0x22e),_0x442b1d[_0x152c2b(0x1ee)]((_0x1c1c6c,_0x1f3c35)=>{_0x51dc49+=_0x1f3c35+0x1+'.\x20'+_0x1c1c6c+'\x0a';})),_0x446a16['length']>0x0&&(_0x51dc49+=_0x152c2b(0x1fc),_0x446a16[_0x152c2b(0x1ee)]((_0x70d341,_0x5125bc)=>{const _0x5c7d52=_0x152c2b;_0x51dc49+=_0x5125bc+0x1+'.\x20'+_0x70d341[_0x5c7d52(0x267)]+':\x20'+_0x70d341[_0x5c7d52(0x27f)]+'\x0a';})),document[_0x152c2b(0x284)](_0x152c2b(0x27c))['value']=_0x51dc49[_0x152c2b(0x226)](),setTimeout(()=>{const _0x44a540=_0x152c2b,_0x26b896=document[_0x44a540(0x284)](_0x44a540(0x27c));_0x26b896&&_0x26b896[_0x44a540(0x232)]({'behavior':'smooth','block':'center'});},0x3c);}function shareMarksOnWhatsApp(){const _0x45493e=_0x186c,_0x2b9de2=document['getElementById']('marksSummary')[_0x45493e(0x25e)];if(!_0x2b9de2['trim']())return void alert(_0x45493e(0x1e8));const _0x47d721='https://wa.me/?text='+encodeURIComponent(_0x2b9de2);window[_0x45493e(0x206)](_0x47d721,'_blank');}function downloadAttendanceImage(){const _0x5ceeba=_0x186c;if(!currentClass)return void alert(_0x5ceeba(0x243));const _0x1e623a=Object[_0x5ceeba(0x228)](attendance[currentClass]||{}),_0x4561e0=_0x1e623a[_0x5ceeba(0x1f5)](([_0x1ab8b2,_0x4b2fcb])=>_0x4b2fcb&&_0x5ceeba(0x239)===_0x4b2fcb['status'])[_0x5ceeba(0x22c)](([_0x26e618])=>_0x26e618),_0x479916=_0x1e623a['filter'](([_0x6d4a57,_0x3d175a])=>_0x3d175a&&_0x5ceeba(0x21e)===_0x3d175a[_0x5ceeba(0x227)])[_0x5ceeba(0x22c)](([_0xcde225,_0x1f40b0])=>({'name':_0xcde225,'time':_0x1f40b0[_0x5ceeba(0x216)]||'-'}));if(0x0===_0x4561e0['length']&&0x0===_0x479916[_0x5ceeba(0x24b)])return void alert(_0x5ceeba(0x201));const _0x284f88=document[_0x5ceeba(0x263)](_0x5ceeba(0x23f));var _0x3f9162,_0xf37b87;_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x244)]=_0x5ceeba(0x23c),_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x294)]=_0x5ceeba(0x229),_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x241)]=_0x5ceeba(0x27d),_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x27a)]=_0x5ceeba(0x1e9),_0x284f88[_0x5ceeba(0x224)]['borderRadius']=_0x5ceeba(0x275),_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x29a)]=_0x5ceeba(0x287),_0x284f88['style'][_0x5ceeba(0x1eb)]='0\x20auto',_0x284f88['style'][_0x5ceeba(0x204)]='border-box',_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x23a)]=_0x5ceeba(0x27e),_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x291)]=_0x5ceeba(0x205),_0x284f88[_0x5ceeba(0x25f)]=_0x5ceeba(0x209)+escapeHtml(currentClass)+'\x20â€”\x20Attendance</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:13px;color:#6b7280;\x22>'+new Date()[_0x5ceeba(0x1f9)](void 0x0,{'day':_0x5ceeba(0x1fa),'month':_0x5ceeba(0x272),'year':_0x5ceeba(0x1fa)})+_0x5ceeba(0x1f1)+(_0xf37b87=_0x4561e0,_0xf37b87&&0x0!==_0xf37b87[_0x5ceeba(0x24b)]?_0xf37b87[_0x5ceeba(0x22c)]((_0x291e68,_0x3a51c1)=>_0x3a51c1+0x1+_0x5ceeba(0x278)+escapeHtml(_0x291e68)+_0x5ceeba(0x223))[_0x5ceeba(0x1f7)](_0x5ceeba(0x23e)):'-')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<!--\x20(Absent\x20removed)\x20-->\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<!--\x20Late\x20card\x20(prominent\x20red)\x20-->\x0a\x20\x20\x20\x20<div\x20style=\x22background:linear-gradient(90deg,\x20rgba(255,241,242,1),\x20rgba(255,255,255,0));\x20padding:12px;\x20border-radius:10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:1px\x20solid\x20rgba(235,87,87,0.08);\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-weight:700;font-size:14px;margin-bottom:8px;display:flex;align-items:center;gap:10px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22background:#fff0f0;border-radius:8px;padding:6px\x208px;border:1px\x20solid\x20rgba(231,76,60,0.06);font-weight:700;color:#e11d48;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ðŸ•’\x20Late\x20Comers\x0a\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:13px;line-height:1.45;color:#111827;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3f9162=_0x479916,_0x3f9162&&0x0!==_0x3f9162[_0x5ceeba(0x24b)]?_0x3f9162[_0x5ceeba(0x22c)]((_0x4ea13a,_0x5d425f)=>_0x5d425f+0x1+_0x5ceeba(0x1ef)+escapeHtml(_0x4ea13a['name'])+_0x5ceeba(0x237)+escapeHtml(_0x4ea13a[_0x5ceeba(0x216)])+'</span>')[_0x5ceeba(0x1f7)](_0x5ceeba(0x23e)):'-')+_0x5ceeba(0x260),_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x208)]=_0x5ceeba(0x212),_0x284f88[_0x5ceeba(0x224)][_0x5ceeba(0x24a)]=_0x5ceeba(0x25a),document[_0x5ceeba(0x1e2)][_0x5ceeba(0x20f)](_0x284f88),html2canvas(_0x284f88,{'scale':0x2,'useCORS':!0x0})[_0x5ceeba(0x289)](_0x2a829b=>{const _0x56d6ab=_0x5ceeba;try{const _0x33d2e6=document[_0x56d6ab(0x263)]('a');_0x33d2e6[_0x56d6ab(0x28d)]=currentClass+'-attendance-'+getLocalISODate()+'.png',_0x33d2e6['href']=_0x2a829b['toDataURL'](_0x56d6ab(0x277)),document['body'][_0x56d6ab(0x20f)](_0x33d2e6),_0x33d2e6[_0x56d6ab(0x276)](),_0x33d2e6[_0x56d6ab(0x288)]();}finally{_0x284f88&&_0x284f88['parentNode']&&document['body']['removeChild'](_0x284f88);}})[_0x5ceeba(0x211)](_0x56ebbc=>{const _0x992854=_0x5ceeba;_0x284f88&&_0x284f88[_0x992854(0x293)]&&document[_0x992854(0x1e2)][_0x992854(0x261)](_0x284f88),console[_0x992854(0x262)](_0x56ebbc),alert(_0x992854(0x1fb));});}async function submitAttendance(){const _0x1ce7c5=_0x186c;if(!window['db'])return void alert(_0x1ce7c5(0x279));if(!currentClass)return void alert('Please\x20select\x20a\x20class\x20first.');const _0x2b221d=findUnmarkedStudents(currentClass);if(_0x2b221d[_0x1ce7c5(0x24b)]>0x0){const _0x4d358e=_0x2b221d[_0x1ce7c5(0x1f8)](0x0,0xc)[_0x1ce7c5(0x1f7)](',\x20');return void alert(_0x1ce7c5(0x1f2)+currentClass+_0x1ce7c5(0x251)+_0x2b221d['length']+_0x1ce7c5(0x220)+_0x4d358e+(_0x2b221d[_0x1ce7c5(0x24b)]>0xc?'...':''));}const _0x4c51da=attendance[currentClass]||{},_0x2bd46b=Object['entries'](_0x4c51da)[_0x1ce7c5(0x1f5)](([_0x431b58,_0x2dff42])=>_0x2dff42&&_0x2dff42[_0x1ce7c5(0x227)]);if(0x0===_0x2bd46b[_0x1ce7c5(0x24b)])return void alert(_0x1ce7c5(0x297));const _0x36924f=getLocalISODate();try{if(await checkAttendanceSubmittedForClassDate(currentClass,_0x36924f))return showToast(currentClass+_0x1ce7c5(0x24e)+_0x36924f+_0x1ce7c5(0x253),{'type':_0x1ce7c5(0x210)}),void setShareAndDownloadVisibility(!0x0);}catch(_0xf7b4e2){if(console[_0x1ce7c5(0x262)](_0x1ce7c5(0x28f),_0xf7b4e2),!confirm(_0x1ce7c5(0x20e)))return;}if(!loggedInTeacher){if(!confirm(_0x1ce7c5(0x271)))return;}if(!confirm(_0x1ce7c5(0x1dc)+currentClass+'\x20('+_0x2bd46b['length']+_0x1ce7c5(0x258)))return;const _0x515003=window[_0x1ce7c5(0x1f4)](window['db'],_0x1ce7c5(0x26a));try{const _0x1fbd64=_0x2bd46b[_0x1ce7c5(0x22c)](([_0x5eca6b,_0x12df6b])=>{const _0x4c9c81=_0x1ce7c5,_0x4b0d3a=_0x12df6b[_0x4c9c81(0x227)]||null,_0x44c9ae={'name':_0x5eca6b,'className':currentClass,'originalStatus':_0x4b0d3a,'status':_0x4c9c81(0x22d)===_0x4b0d3a?_0x4c9c81(0x22d):'Present','isLate':_0x4c9c81(0x21e)===_0x4b0d3a,'date':_0x36924f,'faculty':loggedInTeacher||null,'createdAt':window['Timestamp']?window[_0x4c9c81(0x21f)]['fromDate'](new Date()):new Date()};return window['addDoc'](_0x515003,_0x44c9ae);});await Promise['all'](_0x1fbd64),showToast('Attendance\x20submitted\x20for\x20'+_0x2bd46b[_0x1ce7c5(0x24b)]+_0x1ce7c5(0x285)+currentClass+'.',{'type':_0x1ce7c5(0x210),'duration':0xaf0}),setShareAndDownloadVisibility(!0x0);}catch(_0x343b5f){console['error'](_0x1ce7c5(0x1de),_0x343b5f),alert(_0x1ce7c5(0x21a));}}function setShareAndDownloadVisibility(_0x56a80e){const _0x143fac=_0x186c,_0x5068e9=document[_0x143fac(0x284)]('shareBtn'),_0x2aa82f=document[_0x143fac(0x284)](_0x143fac(0x264));_0x5068e9&&(_0x5068e9[_0x143fac(0x224)][_0x143fac(0x1e0)]=_0x56a80e?'':_0x143fac(0x1e3)),_0x2aa82f&&(_0x2aa82f[_0x143fac(0x224)][_0x143fac(0x1e0)]=_0x56a80e?'':_0x143fac(0x1e3));}document[_0x22a019(0x200)](_0x22a019(0x21d),function(){showAuthModal(),setShareAndDownloadVisibility(!0x1);});
